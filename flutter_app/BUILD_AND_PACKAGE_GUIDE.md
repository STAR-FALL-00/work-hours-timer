# ğŸ“¦ å·¥æ—¶è®¡æ—¶å™¨ - æ„å»ºå’Œæ‰“åŒ…æŒ‡å—

## å‰ææ¡ä»¶

### å¿…éœ€è½¯ä»¶
1. âœ… Flutter SDK 3.41.2ï¼ˆå·²å®‰è£…åœ¨ `E:\flutter_windows_3.41.2-stable\flutter\bin`ï¼‰
2. âœ… Visual Studio 2026 Communityï¼ˆå·²å®‰è£…ï¼‰
3. âš ï¸ Inno Setup 6.xï¼ˆéœ€è¦å®‰è£…ï¼‰

### å®‰è£… Inno Setup

1. ä¸‹è½½ Inno Setupï¼šhttps://jrsoftware.org/isdl.php
2. ä¸‹è½½ä¸­æ–‡è¯­è¨€åŒ…ï¼ˆå¯é€‰ï¼‰
3. å®‰è£…åˆ°é»˜è®¤ä½ç½®ï¼š`C:\Program Files (x86)\Inno Setup 6\`

## æ„å»ºæ­¥éª¤

### æ–¹æ³• 1ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæ¨èï¼‰

1. æ‰“å¼€ `flutter_app` ç›®å½•
2. åŒå‡»è¿è¡Œ `build-release.bat`
3. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦ 2-5 åˆ†é’Ÿï¼‰
4. æ„å»ºäº§ç‰©ä½äºï¼š`build\windows\x64\runner\Release\`

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨æ„å»º

æ‰“å¼€å‘½ä»¤æç¤ºç¬¦æˆ– PowerShellï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd flutter_app

# æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶
E:\flutter_windows_3.41.2-stable\flutter\bin\flutter.bat clean

# è·å–ä¾èµ–
E:\flutter_windows_3.41.2-stable\flutter\bin\flutter.bat pub get

# æ„å»º Release ç‰ˆæœ¬
E:\flutter_windows_3.41.2-stable\flutter\bin\flutter.bat build windows --release
```

## æ„å»ºäº§ç‰©è¯´æ˜

æ„å»ºæˆåŠŸåï¼Œ`build\windows\x64\runner\Release\` ç›®å½•åŒ…å«ï¼š

```
Release/
â”œâ”€â”€ work_hours_timer.exe          # ä¸»ç¨‹åºï¼ˆçº¦ 15-20 MBï¼‰
â”œâ”€â”€ flutter_windows.dll           # Flutter å¼•æ“
â”œâ”€â”€ data/                         # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ icudtl.dat
â”‚   â”œâ”€â”€ flutter_assets/
â”‚   â””â”€â”€ ...
â””â”€â”€ å…¶ä»– DLL æ–‡ä»¶
```

## åˆ›å»ºå®‰è£…ç¨‹åº

### ä½¿ç”¨ Inno Setup

1. ç¡®ä¿å·²å®Œæˆ Release æ„å»º
2. æ‰“å¼€ Inno Setup Compiler
3. æ‰“å¼€æ–‡ä»¶ï¼š`flutter_app\installer.iss`
4. ç‚¹å‡»èœå•ï¼šBuild â†’ Compile
5. ç­‰å¾…ç¼–è¯‘å®Œæˆ
6. å®‰è£…ç¨‹åºç”Ÿæˆåœ¨ï¼š`flutter_app\installer_output\WorkHoursTimer-Setup-v1.0.0.exe`

### å®‰è£…ç¨‹åºç‰¹æ€§

- âœ… æ”¯æŒä¸­æ–‡ç•Œé¢
- âœ… è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿæ¶æ„ï¼ˆx64ï¼‰
- âœ… åˆ›å»ºå¼€å§‹èœå•å¿«æ·æ–¹å¼
- âœ… å¯é€‰åˆ›å»ºæ¡Œé¢å›¾æ ‡
- âœ… å®Œæ•´çš„å¸è½½æ”¯æŒ
- âœ… ä¸éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆå®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼‰

## æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šè·¯å¾„ä¸­æ–‡å­—ç¬¦ç¼–ç é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
Unable to read file: E:\work\work\New-warm\new-warmé”Ÿä¾¥ç¢‰æ‹·\...
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. å°†é¡¹ç›®ç§»åŠ¨åˆ°çº¯è‹±æ–‡è·¯å¾„ï¼ˆå¦‚ `C:\Projects\work-hours-timer\`ï¼‰
2. æˆ–ä½¿ç”¨ `chcp 65001` è®¾ç½® UTF-8 ç¼–ç 

### é—®é¢˜ 2ï¼šVisual Studio æœªæ‰¾åˆ°

**ç—‡çŠ¶ï¼š**
```
Visual Studio not found
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤å·²å®‰è£… Visual Studio 2026
2. ç¡®è®¤å·²å®‰è£… "Desktop development with C++" å·¥ä½œè´Ÿè½½
3. è¿è¡Œ `flutter doctor` æ£€æŸ¥ç¯å¢ƒ

### é—®é¢˜ 3ï¼šæ„å»ºæ—¶é—´è¿‡é•¿

**åŸå› ï¼š**
- é¦–æ¬¡æ„å»ºéœ€è¦ç¼–è¯‘æ‰€æœ‰ä¾èµ–
- åç»­æ„å»ºä¼šå¿«å¾ˆå¤šï¼ˆå¢é‡ç¼–è¯‘ï¼‰

**ä¼˜åŒ–ï¼š**
- ä½¿ç”¨ SSD ç¡¬ç›˜
- å…³é—­æ€æ¯’è½¯ä»¶çš„å®æ—¶æ‰«æ
- å¢åŠ ç³»ç»Ÿå†…å­˜

### é—®é¢˜ 4ï¼šInno Setup æ‰¾ä¸åˆ°æ–‡ä»¶

**ç—‡çŠ¶ï¼š**
```
Source file not found: build\windows\x64\runner\Release\work_hours_timer.exe
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤å·²å®Œæˆ Release æ„å»º
2. æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤ `build\windows\x64\runner\Release\` ç›®å½•å­˜åœ¨

## åˆ†å‘å»ºè®®

### æ–‡ä»¶å¤§å°ä¼˜åŒ–

Release æ„å»ºå·²ç»è¿‡ä¼˜åŒ–ï¼Œä½†ä»å¯ä»¥ï¼š
1. ä½¿ç”¨ UPX å‹ç¼© exe æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
2. ç§»é™¤ä¸éœ€è¦çš„è¯­è¨€èµ„æº
3. ä½¿ç”¨ 7-Zip åˆ›å»ºå‹ç¼©åŒ…

### åˆ†å‘æ–¹å¼

#### æ–¹å¼ 1ï¼šå®‰è£…ç¨‹åºï¼ˆæ¨èï¼‰
- æ–‡ä»¶ï¼š`WorkHoursTimer-Setup-v1.0.0.exe`
- å¤§å°ï¼šçº¦ 30-40 MB
- ä¼˜ç‚¹ï¼šä¸“ä¸šã€æ˜“ç”¨ã€è‡ªåŠ¨é…ç½®
- é€‚åˆï¼šæ™®é€šç”¨æˆ·

#### æ–¹å¼ 2ï¼šç»¿è‰²ç‰ˆï¼ˆä¾¿æºç‰ˆï¼‰
- ç›´æ¥æ‰“åŒ… `Release` æ–‡ä»¶å¤¹
- å‹ç¼©ä¸º ZIP æ–‡ä»¶
- ä¼˜ç‚¹ï¼šæ— éœ€å®‰è£…ã€å¯æ”¾ U ç›˜
- é€‚åˆï¼šæŠ€æœ¯ç”¨æˆ·

#### æ–¹å¼ 3ï¼šMicrosoft Store
- éœ€è¦å¼€å‘è€…è´¦å·
- éœ€è¦ MSIX æ‰“åŒ…
- ä¼˜ç‚¹ï¼šè‡ªåŠ¨æ›´æ–°ã€å¯ä¿¡ä»»
- é€‚åˆï¼šé•¿æœŸç»´æŠ¤

## ç‰ˆæœ¬ç®¡ç†

### æ›´æ–°ç‰ˆæœ¬å·

1. ä¿®æ”¹ `pubspec.yaml`ï¼š
```yaml
version: 1.0.0+1  # ç‰ˆæœ¬å·+æ„å»ºå·
```

2. ä¿®æ”¹ `installer.iss`ï¼š
```iss
#define MyAppVersion "1.0.0"
```

3. é‡æ–°æ„å»ºå’Œæ‰“åŒ…

### ç‰ˆæœ¬å·è§„åˆ™

- æ ¼å¼ï¼š`ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬+æ„å»ºå·`
- ç¤ºä¾‹ï¼š`1.0.0+1`
- ä¸»ç‰ˆæœ¬ï¼šé‡å¤§æ›´æ–°
- æ¬¡ç‰ˆæœ¬ï¼šæ–°åŠŸèƒ½
- ä¿®è®¢ç‰ˆæœ¬ï¼šBug ä¿®å¤
- æ„å»ºå·ï¼šæ¯æ¬¡æ„å»ºé€’å¢

## æµ‹è¯•æ¸…å•

å‘å¸ƒå‰è¯·æµ‹è¯•ï¼š

- [ ] åº”ç”¨èƒ½æ­£å¸¸å¯åŠ¨
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ ‡å‡†æ¨¡å¼å’Œæ¸¸æˆæ¨¡å¼åˆ‡æ¢æ­£å¸¸
- [ ] è®¾ç½®èƒ½æ­£ç¡®ä¿å­˜å’ŒåŠ è½½
- [ ] å·¥ä½œè®°å½•èƒ½æ­£ç¡®ä¿å­˜
- [ ] æˆå°±ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- [ ] ç»Ÿè®¡å›¾è¡¨æ˜¾ç¤ºæ­£ç¡®
- [ ] åº”ç”¨èƒ½æ­£å¸¸å…³é—­
- [ ] å¸è½½åæ•°æ®æ¸…ç†å¹²å‡€ï¼ˆå¯é€‰ä¿ç•™ç”¨æˆ·æ•°æ®ï¼‰

## å‘å¸ƒæ£€æŸ¥æ¸…å•

- [ ] æ›´æ–°ç‰ˆæœ¬å·
- [ ] æ›´æ–° CHANGELOG.md
- [ ] å®Œæˆæ‰€æœ‰æµ‹è¯•
- [ ] æ„å»º Release ç‰ˆæœ¬
- [ ] åˆ›å»ºå®‰è£…ç¨‹åº
- [ ] æµ‹è¯•å®‰è£…ç¨‹åº
- [ ] å‡†å¤‡å‘å¸ƒè¯´æ˜
- [ ] ä¸Šä¼ åˆ°åˆ†å‘å¹³å°

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æ¸…ç†
flutter clean

# è·å–ä¾èµ–
flutter pub get

# æ„å»º Debugï¼ˆå¼€å‘ï¼‰
flutter build windows

# æ„å»º Releaseï¼ˆå‘å¸ƒï¼‰
flutter build windows --release

# è¿è¡Œåº”ç”¨
flutter run -d windows

# æ£€æŸ¥ç¯å¢ƒ
flutter doctor -v
```

## ç›¸å…³æ–‡æ¡£

- [Flutter Windows éƒ¨ç½²æ–‡æ¡£](https://docs.flutter.dev/deployment/windows)
- [Inno Setup æ–‡æ¡£](https://jrsoftware.org/ishelp/)
- [åº”ç”¨ç­¾åæŒ‡å—](https://docs.microsoft.com/en-us/windows/win32/seccrypto/cryptography-tools)

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Flutter ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®
2. Visual Studio æ˜¯å¦æ­£ç¡®å®‰è£…
3. ç³»ç»Ÿç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®
4. é˜²ç«å¢™/æ€æ¯’è½¯ä»¶æ˜¯å¦é˜»æ­¢

---

**æ³¨æ„ï¼š** ç”±äºå½“å‰é¡¹ç›®è·¯å¾„åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼Œå»ºè®®å°†é¡¹ç›®ç§»åŠ¨åˆ°çº¯è‹±æ–‡è·¯å¾„åå†è¿›è¡Œ Release æ„å»ºï¼Œä»¥é¿å…ç¼–ç é—®é¢˜ã€‚
