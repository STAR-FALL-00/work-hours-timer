# v1.4.0 测试清单

> **测试日期**: 2026-02-26  
> **测试版本**: v1.4.0 横版跑酷计时器  
> **应用状态**: ✅ 已启动  

---

## 🎯 测试目标

验证 v1.4.0 横版跑酷计时器的所有功能是否正常工作。

---

## ✅ 测试步骤

### 第一步：检查应用启动

- [ ] 应用窗口已打开
- [ ] 主页正常显示
- [ ] 没有崩溃或错误（音频错误可忽略）

---

### 第二步：切换到跑酷模式

**操作**：
1. 查看 AppBar（顶部标题栏）
2. 找到右上角的切换按钮（⏱️ 图标）
3. 点击切换按钮

**预期结果**：
- [ ] 按钮图标变为 🏃（跑步图标）
- [ ] 界面显示跑道组件
- [ ] 显示时间段提示（如"🌅 早晨"）
- [ ] 显示跑道：[🏠]━━━━━━━━━━━━━━━[🏡]

**截图位置**：AppBar 右上角，商店图标左侧

---

### 第三步：观察跑道界面

**检查项**：
- [ ] 起点显示 🏠（房子图标）
- [ ] 终点显示 🏡（房子图标）
- [ ] 跑道是一条横向的线
- [ ] 小人图标 🧍‍♂️ 在起点位置
- [ ] 显示"已工作: 0h 0m"和"目标: 8h 0m"

---

### 第四步：检查时间背景

**当前时间段**：根据你的系统时间

**预期显示**：
- [ ] 早晨 (6-9点)：🌅 早晨，背景偏蓝色
- [ ] 上午 (9-12点)：☀️ 上午，背景偏黄色
- [ ] 下午 (12-18点)：🌤️ 下午，背景偏橙色
- [ ] 傍晚 (18-21点)：🌆 傍晚，背景偏紫色
- [ ] 夜晚 (21-6点)：🌙 夜晚，背景偏深蓝

**检查**：
- [ ] 时间段文字正确
- [ ] 背景颜色与时间段匹配
- [ ] 颜色过渡平滑

---

### 第五步：开始工作

**操作**：
1. 点击"开始工作"按钮（或"开始战斗"）

**预期结果**：
- [ ] 小人图标变为 🏃‍♂️ 或 🏃（跑步动画）
- [ ] 小人开始向右移动
- [ ] 状态显示"🟢 战斗中"
- [ ] 时间开始计数
- [ ] 按钮变为"暂停"和"结束战斗"

**动画检查**：
- [ ] 小人位置平滑移动
- [ ] 小人图标在 🏃‍♂️ 和 🏃 之间切换（走路动画）
- [ ] 移动速度合理

---

### 第六步：观察里程碑（如果有）

**说明**：里程碑只在合理范围内显示

**预期里程碑**：
- 🍱 午休 (12:00)
- ☕ 下午茶 (15:00)
- 🏡 下班 (18:00)

**检查**：
- [ ] 里程碑在跑道上显示
- [ ] 里程碑位置合理
- [ ] 里程碑有图标和标签
- [ ] 未到达的里程碑是白色背景
- [ ] 已到达的里程碑是彩色背景

**注意**：如果你的工作时长设置较短（如2小时），可能看不到所有里程碑。

---

### 第七步：测试暂停功能

**操作**：
1. 点击"暂停"按钮

**预期结果**：
- [ ] 小人图标变为 🚶‍♂️（慢走）
- [ ] 小人继续移动但速度不变（因为时间暂停）
- [ ] 状态显示"⏸️ 暂停休息"
- [ ] 时间停止计数
- [ ] 按钮变为"继续"

**操作**：
2. 点击"继续"按钮

**预期结果**：
- [ ] 小人图标变回 🏃‍♂️ 🏃（快跑）
- [ ] 状态变回"🟢 战斗中"
- [ ] 时间继续计数

---

### 第八步：测试里程碑提示（需要等待）

**说明**：这个测试需要等待到达里程碑时间

**快速测试方法**：
1. 修改系统时间到接近午休时间（11:55）
2. 开始工作
3. 等待5分钟

**预期结果**：
- [ ] 小人到达里程碑位置
- [ ] 自动显示提示气泡
- [ ] 气泡内容："该吃午饭啦！🍱"
- [ ] 气泡有缩放动画
- [ ] 3秒后气泡自动消失

**手动测试**：
- [ ] 点击已到达的里程碑
- [ ] 提示气泡重新显示
- [ ] 可以手动关闭气泡

---

### 第九步：测试项目信息显示

**检查**：
- [ ] 如果选择了项目，显示项目卡片
- [ ] 项目名称正确
- [ ] 项目进度正确
- [ ] 可以点击编辑按钮选择项目

---

### 第十步：测试预测奖励

**检查**：
- [ ] 工作时显示预测金币
- [ ] 工作时显示预测经验值
- [ ] 数值随时间增加
- [ ] 如果连续工作45分钟以上，显示连击提示

---

### 第十一步：结束工作

**操作**：
1. 点击"结束战斗"按钮

**预期结果**：
- [ ] 显示奖励飘字动画
- [ ] 显示工作完成对话框
- [ ] 对话框显示奖励总结
- [ ] 小人回到起点
- [ ] 状态变为"☕ 营地休息"

---

### 第十二步：切换回传统模式

**操作**：
1. 点击 AppBar 右上角的切换按钮

**预期结果**：
- [ ] 按钮图标变回 ⏱️
- [ ] 界面切换回传统计时器
- [ ] 功能正常工作
- [ ] 可以再次切换回跑酷模式

---

## 🐛 已知问题

### 音频播放错误
```
AudioPlayers Exception: AudioPlayerException
播放音效失败：start_work
```

**影响**：无法播放音效  
**解决方案**：已知问题，不影响核心功能  
**状态**：可忽略

### 连接丢失
```
Lost connection to device.
```

**影响**：无，应用仍在运行  
**解决方案**：正常现象，应用已启动  
**状态**：可忽略

---

## 📝 测试记录

### 基础功能测试

| 功能 | 状态 | 备注 |
|------|------|------|
| 应用启动 | ⬜ 待测试 | |
| 切换跑酷模式 | ⬜ 待测试 | |
| 跑道显示 | ⬜ 待测试 | |
| 时间背景 | ⬜ 待测试 | |
| 开始工作 | ⬜ 待测试 | |
| 小人动画 | ⬜ 待测试 | |
| 暂停/继续 | ⬜ 待测试 | |
| 结束工作 | ⬜ 待测试 | |
| 切换回传统模式 | ⬜ 待测试 | |

### 里程碑系统测试

| 功能 | 状态 | 备注 |
|------|------|------|
| 里程碑显示 | ⬜ 待测试 | |
| 到达检测 | ⬜ 待测试 | |
| 提示气泡 | ⬜ 待测试 | |
| 自动消失 | ⬜ 待测试 | |
| 点击查看 | ⬜ 待测试 | |

### 视觉效果测试

| 功能 | 状态 | 备注 |
|------|------|------|
| 背景颜色 | ⬜ 待测试 | |
| 颜色过渡 | ⬜ 待测试 | |
| 动画流畅度 | ⬜ 待测试 | |
| 布局合理性 | ⬜ 待测试 | |

---

## 💡 测试技巧

### 快速测试里程碑

**方法 1：修改系统时间**
1. 将系统时间改到 11:55
2. 开始工作
3. 等待5分钟观察午休提示

**方法 2：修改代码（临时）**
1. 打开 `lib/ui/widgets/timer/milestone.dart`
2. 修改里程碑时间为当前时间+5分钟
3. 热重载（按 r）
4. 开始工作并等待

### 观察动画细节

**小人动画**：
- 仔细观察小人图标是否在 🏃‍♂️ 和 🏃 之间切换
- 切换频率应该合理（不要太快或太慢）

**移动动画**：
- 小人移动应该平滑
- 不应该有跳跃或卡顿

**气泡动画**：
- 出现时有缩放效果
- 消失时有淡出效果

---

## 🎯 测试重点

### 必须测试
1. ✅ 切换到跑酷模式
2. ✅ 开始工作，观察小人移动
3. ✅ 检查时间背景颜色
4. ✅ 暂停/继续功能
5. ✅ 结束工作

### 建议测试
1. 里程碑提示（需要等待或修改时间）
2. 长时间运行（1小时+）
3. 多次切换模式
4. 不同时间段的背景颜色

### 可选测试
1. 极端时长（<5分钟或>12小时）
2. 跨天工作
3. 性能测试

---

## 📸 建议截图

1. **跑酷模式主界面**
   - 显示完整的跑道
   - 包含时间段提示
   - 小人在跑道上

2. **工作中状态**
   - 小人移动中
   - 状态显示"战斗中"
   - 预测奖励显示

3. **里程碑提示**
   - 提示气泡显示
   - 里程碑高亮

4. **不同时间段**
   - 早晨背景
   - 下午背景
   - 夜晚背景

---

## 🙏 测试完成后

### 记录反馈

**好的方面**：
- 

**需要改进**：
- 

**发现的问题**：
- 

**建议**：
- 

---

## 📞 下一步

测试完成后，请告诉我：
1. 哪些功能工作正常
2. 发现了什么问题
3. 有什么改进建议
4. 是否需要修复或优化

---

**创建日期**: 2026-02-26  
**状态**: 📋 待测试  
**应用状态**: ✅ 已启动并运行
