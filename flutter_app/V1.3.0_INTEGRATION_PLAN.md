# v1.3.0 集成计划

> **版本**: v1.3.0  
> **阶段**: 集成与测试  
> **开始日期**: 2026-02-26  
> **状态**: 🚧 进行中

---

## 📋 集成任务清单

### 1. 生成 Hive 适配器 ⏳

**任务**:
- [ ] 为 Item 模型生成适配器
- [ ] 为 ItemInstance 模型生成适配器
- [ ] 运行 build_runner

**命令**:
```bash
cd flutter_app
flutter pub run build_runner build --delete-conflicting-outputs
```

---

### 2. 更新 main.dart ⏳

**任务**:
- [ ] 注册新的 Hive 适配器
- [ ] 初始化悬浮窗服务
- [ ] 初始化暗色模式服务
- [ ] 初始化主题管理器

---

### 3. 创建道具商店界面 ⏳

**任务**:
- [ ] 创建 ItemShopScreen
- [ ] 道具列表展示
- [ ] 道具购买功能
- [ ] 道具使用功能
- [ ] 集成到商店页面

---

### 4. 创建道具背包界面 ⏳

**任务**:
- [ ] 创建 ItemInventoryScreen
- [ ] 显示已拥有道具
- [ ] 道具使用功能
- [ ] 道具效果显示
- [ ] 集成到设置页面

---

### 5. 更新商店页面 ⏳

**任务**:
- [ ] 添加道具分类
- [ ] 添加新主题
- [ ] 添加新装饰品
- [ ] 更新商店数据源

---

### 6. 添加导出功能入口 ⏳

**任务**:
- [ ] 在统计页面添加导出按钮
- [ ] 创建导出对话框
- [ ] 实现导出功能调用
- [ ] 显示导出结果

---

### 7. 添加暗色模式设置 ⏳

**任务**:
- [ ] 在设置页面添加暗色模式选项
- [ ] 添加定时切换设置
- [ ] 添加护眼模式开关
- [ ] 添加亮度调节滑块

---

### 8. 添加悬浮窗切换入口 ⏳

**任务**:
- [ ] 在主页添加悬浮窗按钮
- [ ] 在设置页面添加悬浮窗选项
- [ ] 实现切换功能

---

### 9. 更新 Providers ⏳

**任务**:
- [ ] 创建 ItemService Provider
- [ ] 创建 ExportService Provider
- [ ] 创建 DarkModeService Provider
- [ ] 创建 ThemeManager Provider

---

### 10. 功能测试 ⏳

**任务**:
- [ ] 道具系统测试
- [ ] 导出功能测试
- [ ] 暗色模式测试
- [ ] 悬浮窗测试
- [ ] 主题切换测试

---

## 🎯 优先级

### 高优先级
1. 生成 Hive 适配器
2. 更新 main.dart
3. 创建道具商店界面

### 中优先级
4. 创建道具背包界面
5. 更新商店页面
6. 添加导出功能入口

### 低优先级
7. 添加暗色模式设置
8. 添加悬浮窗切换入口
9. 更新 Providers

---

## 📅 时间规划

### Day 1: 基础集成
- 生成 Hive 适配器
- 更新 main.dart
- 更新 Providers

### Day 2: UI 集成
- 创建道具商店界面
- 创建道具背包界面
- 更新商店页面

### Day 3: 功能完善
- 添加导出功能入口
- 添加暗色模式设置
- 添加悬浮窗切换入口

### Day 4: 测试优化
- 功能测试
- Bug 修复
- 性能优化

---

**创建日期**: 2026-02-26  
**维护者**: 开发团队  
**状态**: 🚧 进行中

