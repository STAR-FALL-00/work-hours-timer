# v3.0 Sprint 1 ä»»åŠ¡æ¸…å•

> **Sprint 1**: æ¡†æ¶ä¸é€šä¿¡ï¼ˆWeek 1ï¼‰  
> **ç›®æ ‡**: è·‘é€šåŒçª—å£ "Hello World"  
> **æ—¶é—´**: Day 1-7

---

## ğŸ“… Day 1-2: ç¯å¢ƒæ­å»º

### âœ… ä»»åŠ¡ 1.1: æ·»åŠ ä¾èµ–

- [ ] åœ¨ `pubspec.yaml` ä¸­æ·»åŠ æ–°ä¾èµ–
  ```yaml
  dependencies:
    desktop_multi_window: ^0.2.0
    flutter_acrylic: ^1.1.4
    win32: ^5.0.0
    synchronized: ^3.1.0
  ```
- [ ] è¿è¡Œ `flutter pub get`
- [ ] éªŒè¯ä¾èµ–å®‰è£…æˆåŠŸ

### âœ… ä»»åŠ¡ 1.2: åˆ›å»ºé¡¹ç›®ç»“æ„

- [ ] åˆ›å»º `lib/main_window.dart`
- [ ] åˆ›å»º `lib/widget_window.dart`
- [ ] åˆ›å»º `lib/core/services/window_manager_service.dart`
- [ ] åˆ›å»º `lib/core/services/window_communication_service.dart`

**ç›®å½•ç»“æ„**:
```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ main_window.dart
â”œâ”€â”€ widget_window.dart
â””â”€â”€ core/
    â””â”€â”€ services/
        â”œâ”€â”€ window_manager_service.dart
        â””â”€â”€ window_communication_service.dart
```

### âœ… ä»»åŠ¡ 1.3: å®ç°ä¸»å…¥å£

- [ ] ä¿®æ”¹ `main.dart`ï¼Œæ·»åŠ çª—å£ç±»å‹åˆ¤æ–­é€»è¾‘
  ```dart
  void main(List<String> args) async {
    WidgetsFlutterBinding.ensureInitialized();
    
    if (args.isEmpty || args.first == 'main') {
      runApp(MainWindowApp());
    } else if (args.first == 'widget') {
      runApp(WidgetWindowApp());
    }
  }
  ```

### âœ… ä»»åŠ¡ 1.4: å®ç°ä¸»çª—å£

- [ ] åœ¨ `main_window.dart` ä¸­åˆ›å»º `MainWindowApp`
- [ ] æ·»åŠ ä¸€ä¸ªæŒ‰é’®"åˆ›å»ºæŒ‚ä»¶çª—å£"
- [ ] å®ç°çª—å£åˆ›å»ºé€»è¾‘
  ```dart
  final windowId = await DesktopMultiWindow.createWindow(
    jsonEncode({'type': 'widget'}),
  );
  ```

### âœ… ä»»åŠ¡ 1.5: å®ç°æŒ‚ä»¶çª—å£

- [ ] åœ¨ `widget_window.dart` ä¸­åˆ›å»º `WidgetWindowApp`
- [ ] æ˜¾ç¤ºç®€å•çš„æ–‡å­—"Hello from Widget"
- [ ] è®¾ç½®çª—å£å¤§å°ä¸º 240Ã—120

### âœ… éªŒæ”¶æ ‡å‡†

- [ ] è¿è¡Œåº”ç”¨åï¼Œä¸»çª—å£æ˜¾ç¤º
- [ ] ç‚¹å‡»"åˆ›å»ºæŒ‚ä»¶çª—å£"æŒ‰é’®ï¼ŒæŒ‚ä»¶çª—å£æ˜¾ç¤º
- [ ] ä¸¤ä¸ªçª—å£å¯ä»¥åŒæ—¶å­˜åœ¨

---

## ğŸ“… Day 3-4: çª—å£ç‰¹æ•ˆ

### âœ… ä»»åŠ¡ 2.1: å®ç°ä¸»çª—å£æ¯›ç»ç’ƒæ•ˆæœ

- [ ] åˆ›å»º `lib/core/services/window_effect_service.dart`
- [ ] å®ç° `applyStarRailStyle()` æ–¹æ³•
  ```dart
  Future<void> applyStarRailStyle() async {
    await Window.setEffect(
      effect: WindowEffect.acrylic,
      color: Color(0xCC1A1A2E),
    );
  }
  ```
- [ ] åœ¨ä¸»çª—å£å¯åŠ¨æ—¶è°ƒç”¨

### âœ… ä»»åŠ¡ 2.2: å®ç°æŒ‚ä»¶çª—å£é€æ˜èƒŒæ™¯

- [ ] åˆ›å»º `lib/core/services/widget_window_service.dart`
- [ ] å®ç° `setupTransparentWindow()` æ–¹æ³•
  ```dart
  Future<void> setupTransparentWindow() async {
    await Window.setEffect(
      effect: WindowEffect.transparent,
    );
  }
  ```
- [ ] åœ¨æŒ‚ä»¶çª—å£å¯åŠ¨æ—¶è°ƒç”¨

### âœ… ä»»åŠ¡ 2.3: å®ç°é¼ æ ‡ç©¿é€

- [ ] æ·»åŠ  Win32 API è°ƒç”¨
  ```dart
  import 'package:win32/win32.dart';
  
  void setClickThrough(int hwnd) {
    final exStyle = GetWindowLongPtr(hwnd, GWL_EXSTYLE);
    SetWindowLongPtr(
      hwnd,
      GWL_EXSTYLE,
      exStyle | WS_EX_TRANSPARENT | WS_EX_LAYERED,
    );
  }
  ```
- [ ] è·å–çª—å£å¥æŸ„å¹¶åº”ç”¨

### âœ… ä»»åŠ¡ 2.4: æµ‹è¯•çª—å£ç‰¹æ•ˆ

- [ ] æµ‹è¯•ä¸»çª—å£æ¯›ç»ç’ƒæ•ˆæœæ˜¯å¦æ˜¾ç¤º
- [ ] æµ‹è¯•æŒ‚ä»¶çª—å£æ˜¯å¦å®Œå…¨é€æ˜
- [ ] æµ‹è¯•ç‚¹å‡»æŒ‚ä»¶ç©ºç™½å¤„æ˜¯å¦ç©¿é€åˆ°æ¡Œé¢

### âœ… éªŒæ”¶æ ‡å‡†

- [ ] ä¸»çª—å£æ˜¾ç¤ºæ¯›ç»ç’ƒæ•ˆæœï¼ˆå¯ä»¥çœ‹åˆ°èƒŒåçš„æ¡Œé¢æ¨¡ç³Šï¼‰
- [ ] æŒ‚ä»¶çª—å£å®Œå…¨é€æ˜ï¼ˆåªæ˜¾ç¤ºå†…å®¹ï¼ŒèƒŒæ™¯é€æ˜ï¼‰
- [ ] ç‚¹å‡»æŒ‚ä»¶ç©ºç™½å¤„å¯ä»¥ç©¿é€åˆ°æ¡Œé¢ï¼ˆå¯ä»¥ç‚¹å‡»æ¡Œé¢å›¾æ ‡ï¼‰

---

## ğŸ“… Day 5-7: è·¨çª—å£é€šä¿¡

### âœ… ä»»åŠ¡ 3.1: å®ç°é€šä¿¡æœåŠ¡

- [ ] å®Œå–„ `window_communication_service.dart`
- [ ] å®ç° `sendMessage()` æ–¹æ³•
  ```dart
  Future<void> sendMessage(String type, Map<String, dynamic> data) async {
    await DesktopMultiWindow.invokeMethod(
      _targetWindowId!,
      'onMessage',
      {'type': type, 'data': data},
    );
  }
  ```
- [ ] å®ç° `setMessageHandler()` æ–¹æ³•
  ```dart
  void setMessageHandler(Function(String, Map) handler) {
    DesktopMultiWindow.setMethodHandler((call, fromWindowId) async {
      if (call.method == 'onMessage') {
        final message = call.arguments;
        handler(message['type'], message['data']);
      }
    });
  }
  ```

### âœ… ä»»åŠ¡ 3.2: ä¸»çª—å£å‘é€æ¶ˆæ¯

- [ ] åœ¨ä¸»çª—å£æ·»åŠ ä¸€ä¸ªæŒ‰é’®"å‘é€æ¶ˆæ¯"
- [ ] ç‚¹å‡»æŒ‰é’®æ—¶å‘é€æµ‹è¯•æ¶ˆæ¯
  ```dart
  WindowCommunicationService().sendMessage('TEST', {
    'text': 'Hello from Main Window',
  });
  ```

### âœ… ä»»åŠ¡ 3.3: æŒ‚ä»¶çª—å£æ¥æ”¶æ¶ˆæ¯

- [ ] åœ¨æŒ‚ä»¶çª—å£è®¾ç½®æ¶ˆæ¯å¤„ç†å™¨
  ```dart
  WindowCommunicationService().setMessageHandler((type, data) {
    if (type == 'TEST') {
      setState(() {
        displayText = data['text'];
      });
    }
  });
  ```
- [ ] æ˜¾ç¤ºæ¥æ”¶åˆ°çš„æ–‡å­—

### âœ… ä»»åŠ¡ 3.4: æµ‹è¯•é€šä¿¡å»¶è¿Ÿ

- [ ] åˆ›å»ºå»¶è¿Ÿæµ‹è¯•å·¥å…·
  ```dart
  void testLatency() async {
    final start = DateTime.now();
    await WindowCommunicationService().sendMessage('PING', {});
    // åœ¨æ¥æ”¶ç«¯è®°å½•æ—¶é—´
    final end = DateTime.now();
    final latency = end.difference(start).inMilliseconds;
    print('Latency: ${latency}ms');
  }
  ```
- [ ] è¿è¡Œæµ‹è¯•ï¼Œè®°å½•å»¶è¿Ÿæ•°æ®
- [ ] ç¡®ä¿å»¶è¿Ÿ < 100ms

### âœ… ä»»åŠ¡ 3.5: å®ç°åŒå‘é€šä¿¡

- [ ] æŒ‚ä»¶çª—å£æ·»åŠ æŒ‰é’®"å‘é€å›ä¸»çª—å£"
- [ ] å®ç°æŒ‚ä»¶ â†’ ä¸»çª—å£çš„æ¶ˆæ¯å‘é€
- [ ] ä¸»çª—å£æ¥æ”¶å¹¶æ˜¾ç¤ºæ¶ˆæ¯

### âœ… éªŒæ”¶æ ‡å‡†

- [ ] ä¸»çª—å£ç‚¹å‡»æŒ‰é’® â†’ æŒ‚ä»¶çª—å£æ–‡å­—å˜åŒ–
- [ ] æŒ‚ä»¶çª—å£ç‚¹å‡»æŒ‰é’® â†’ ä¸»çª—å£æ–‡å­—å˜åŒ–
- [ ] é€šä¿¡å»¶è¿Ÿ < 100ms
- [ ] æ¶ˆæ¯ä¸ä¸¢å¤±ï¼ˆå‘é€ 100 æ¬¡ï¼Œæ¥æ”¶ 100 æ¬¡ï¼‰

---

## ğŸ“Š Sprint 1 äº¤ä»˜ç‰©

### ä»£ç äº¤ä»˜

- [ ] `main.dart` - ä¸»å…¥å£
- [ ] `main_window.dart` - ä¸»çª—å£
- [ ] `widget_window.dart` - æŒ‚ä»¶çª—å£
- [ ] `window_manager_service.dart` - çª—å£ç®¡ç†æœåŠ¡
- [ ] `window_communication_service.dart` - é€šä¿¡æœåŠ¡
- [ ] `window_effect_service.dart` - çª—å£ç‰¹æ•ˆæœåŠ¡
- [ ] `widget_window_service.dart` - æŒ‚ä»¶çª—å£æœåŠ¡

### æ–‡æ¡£äº¤ä»˜

- [ ] é€šä¿¡å»¶è¿Ÿæµ‹è¯•æŠ¥å‘Š
  - å¹³å‡å»¶è¿Ÿ
  - æœ€å¤§å»¶è¿Ÿ
  - æœ€å°å»¶è¿Ÿ
  - æµ‹è¯•æ¬¡æ•°
- [ ] çª—å£ç‰¹æ•ˆå…¼å®¹æ€§æŠ¥å‘Š
  - Windows 10 æµ‹è¯•ç»“æœ
  - Windows 11 æµ‹è¯•ç»“æœ
  - å·²çŸ¥é—®é¢˜åˆ—è¡¨

### Demo è§†é¢‘

- [ ] å½•åˆ¶ Demo è§†é¢‘ï¼ˆ1-2 åˆ†é’Ÿï¼‰
  - å±•ç¤ºåŒçª—å£å¯åŠ¨
  - å±•ç¤ºçª—å£ç‰¹æ•ˆ
  - å±•ç¤ºè·¨çª—å£é€šä¿¡
  - å±•ç¤ºé¼ æ ‡ç©¿é€

---

## ğŸ› å·²çŸ¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æŒ‚ä»¶çª—å£æ— æ³•è·å–å¥æŸ„

**ç°è±¡**: è°ƒç”¨ `GetWindowLongPtr` æ—¶è¿”å› 0

**è§£å†³æ–¹æ¡ˆ**:
```dart
// ä½¿ç”¨ window_manager è·å–å¥æŸ„
import 'package:window_manager/window_manager.dart';

final hwnd = await windowManager.getWindowHandle();
```

### é—®é¢˜ 2: æ¯›ç»ç’ƒæ•ˆæœåœ¨ Windows 10 ä¸Šä¸æ˜¾ç¤º

**ç°è±¡**: ä¸»çª—å£èƒŒæ™¯æ˜¯çº¯è‰²ï¼Œæ²¡æœ‰æ¨¡ç³Šæ•ˆæœ

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Windows ç‰ˆæœ¬æ˜¯å¦ â‰¥ 1809
- æ£€æŸ¥ç³»ç»Ÿè®¾ç½®ä¸­æ˜¯å¦å¯ç”¨äº†"é€æ˜æ•ˆæœ"
- é™çº§ä½¿ç”¨ `WindowEffect.aero`

### é—®é¢˜ 3: é€šä¿¡å»¶è¿Ÿè¿‡é«˜ï¼ˆ>200msï¼‰

**ç°è±¡**: æ¶ˆæ¯å‘é€åï¼ŒæŒ‚ä»¶çª—å£å»¶è¿Ÿå¾ˆä¹…æ‰æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ˜¯å¦åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯
- å‡å°‘æ¶ˆæ¯ä½“å¤§å°
- ä½¿ç”¨æ‰¹é‡å‘é€ï¼ˆå¤šä¸ªæ•°æ®åˆå¹¶æˆä¸€æ¡æ¶ˆæ¯ï¼‰

---

## ğŸ“ æ¯æ—¥ç«™ä¼šé—®é¢˜

### Day 1
- [ ] ä¾èµ–å®‰è£…æ˜¯å¦æˆåŠŸï¼Ÿ
- [ ] é¡¹ç›®ç»“æ„æ˜¯å¦åˆ›å»ºå®Œæˆï¼Ÿ
- [ ] æ˜¯å¦é‡åˆ°ç¯å¢ƒé—®é¢˜ï¼Ÿ

### Day 2
- [ ] åŒçª—å£æ˜¯å¦å¯ä»¥åŒæ—¶å¯åŠ¨ï¼Ÿ
- [ ] çª—å£åˆ›å»ºé€»è¾‘æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] æ˜¯å¦æœ‰ç¼–è¯‘é”™è¯¯ï¼Ÿ

### Day 3
- [ ] æ¯›ç»ç’ƒæ•ˆæœæ˜¯å¦æ˜¾ç¤ºï¼Ÿ
- [ ] é€æ˜èƒŒæ™¯æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ
- [ ] æ˜¯å¦é‡åˆ° Win32 API è°ƒç”¨é—®é¢˜ï¼Ÿ

### Day 4
- [ ] é¼ æ ‡ç©¿é€æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ
- [ ] çª—å£ç‰¹æ•ˆåœ¨ä¸åŒ Windows ç‰ˆæœ¬ä¸Šæ˜¯å¦å…¼å®¹ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦è°ƒæ•´ç‰¹æ•ˆå‚æ•°ï¼Ÿ

### Day 5
- [ ] é€šä¿¡æœåŠ¡æ˜¯å¦å®ç°å®Œæˆï¼Ÿ
- [ ] æ¶ˆæ¯å‘é€æ˜¯å¦æˆåŠŸï¼Ÿ
- [ ] æ˜¯å¦é‡åˆ°åºåˆ—åŒ–é—®é¢˜ï¼Ÿ

### Day 6
- [ ] æ¶ˆæ¯æ¥æ”¶æ˜¯å¦æ­£å¸¸ï¼Ÿ
- [ ] é€šä¿¡å»¶è¿Ÿæ˜¯å¦è¾¾æ ‡ï¼Ÿ
- [ ] æ˜¯å¦æœ‰æ¶ˆæ¯ä¸¢å¤±ï¼Ÿ

### Day 7
- [ ] Sprint 1 æ‰€æœ‰ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Ÿ
- [ ] äº¤ä»˜ç‰©æ˜¯å¦å‡†å¤‡å®Œæ¯•ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦å»¶æœŸï¼Ÿ

---

## ğŸ¯ Sprint 1 æˆåŠŸæ ‡å‡†

### å¿…é¡»å®Œæˆï¼ˆP0ï¼‰

- [x] åŒçª—å£å¯ä»¥åŒæ—¶å¯åŠ¨
- [x] ä¸»çª—å£æ˜¾ç¤ºæ¯›ç»ç’ƒæ•ˆæœ
- [x] æŒ‚ä»¶çª—å£å®Œå…¨é€æ˜
- [x] è·¨çª—å£é€šä¿¡æ­£å¸¸å·¥ä½œ
- [x] é€šä¿¡å»¶è¿Ÿ < 100ms

### åº”è¯¥å®Œæˆï¼ˆP1ï¼‰

- [ ] é¼ æ ‡ç©¿é€ç”Ÿæ•ˆ
- [ ] çª—å£ç‰¹æ•ˆåœ¨ Windows 10/11 ä¸Šéƒ½æ­£å¸¸
- [ ] åŒå‘é€šä¿¡æ­£å¸¸
- [ ] å»¶è¿Ÿæµ‹è¯•æŠ¥å‘Šå®Œæˆ

### å¯ä»¥å»¶åï¼ˆP2ï¼‰

- [ ] Demo è§†é¢‘å½•åˆ¶
- [ ] ä»£ç æ³¨é‡Šå®Œå–„
- [ ] å•å…ƒæµ‹è¯•ç¼–å†™

---

**åˆ›å»ºæ—¥æœŸ**: 2026-02-26  
**Sprint**: 1/3  
**çŠ¶æ€**: ğŸ“‹ å¾…å¼€å§‹  
**ä¸‹ä¸€æ­¥**: å¼€å§‹ Day 1 ä»»åŠ¡

åŠ æ²¹ï¼ğŸš€
