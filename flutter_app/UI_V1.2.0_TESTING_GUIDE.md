# UI v1.2.0 测试指南

> **版本**: v1.2.0  
> **创建日期**: 2026-02-26  
> **测试范围**: Phase 1-3 完成内容

---

## 🚀 快速启动

### 1. 运行应用
```bash
cd flutter_app
flutter run
```

### 2. 热重载
修改代码后按 `r` 进行热重载

### 3. 完全重启
按 `R` 进行完全重启（如果遇到问题）

---

## 🧪 测试清单

### Phase 1: 主题系统 ✅

#### 配色测试
- [ ] 主色调显示正确（Deep Indigo）
- [ ] 金币色显示正确（Amber）
- [ ] 战斗色显示正确（Coral Red）
- [ ] 休息色显示正确（Emerald Green）

#### 字体测试
- [ ] 标题使用 Poppins 字体
- [ ] 计时器使用 Roboto Mono 字体
- [ ] 中文显示正常

---

### Phase 2: 基础组件 ✅

#### MissionCard（任务卡片）
**测试步骤**:
1. 启动应用，查看主页中央的任务卡片
2. 检查以下元素：
   - [ ] 标题"当前任务"显示正确
   - [ ] 计时器数字清晰可见（00:00:00）
   - [ ] 状态指示显示"☕ 营地休息"

**有项目时**:
1. 点击"项目管理"创建一个测试项目
2. 返回主页，点击任务卡片中的项目名称
3. 检查：
   - [ ] 底部抽屉弹出
   - [ ] 可以选择项目
   - [ ] BOSS血条显示正确
   - [ ] 进度文字显示（0.0h / 10.0h）

#### ResourceCapsule（资源胶囊）
**测试步骤**:
1. 查看顶部状态栏
2. 检查：
   - [ ] 金币胶囊显示（💰 图标 + 数字）
   - [ ] 经验值胶囊显示（⭐ 图标 + 数字/最大值）
   - [ ] 经验值进度条显示正确

#### ActionButton（操作按钮）
**测试步骤**:
1. 点击"开始工作"按钮
2. 检查：
   - [ ] 按钮有缩放动效
   - [ ] 渐变背景显示正确
   - [ ] 图标和文字清晰

3. 工作开始后，检查：
   - [ ] 显示"暂停"和"结束战斗"两个按钮
   - [ ] 按钮颜色正确（绿色/红色）
   - [ ] 点击有反馈

#### FloatingText（飘字动画）
**测试步骤**:
1. 开始工作并等待至少1分钟
2. 点击"结束战斗"
3. 检查：
   - [ ] 金币飘字出现（+X 💰）
   - [ ] 经验值飘字出现（+X ⭐）
   - [ ] 飘字向上移动并渐隐
   - [ ] 延迟后显示奖励对话框

---

### Phase 3: 主页重构 ✅

#### 整体布局
**测试步骤**:
1. 打开应用主页
2. 检查布局：
   - [ ] 顶部状态栏（等级 + 金币 + 经验）
   - [ ] 中央任务卡片（占据主要视觉焦点）
   - [ ] 底部操作按钮

#### 工作流程测试

**场景1: 无项目工作**
1. [ ] 点击"开始工作"
2. [ ] 计时器开始计时
3. [ ] 状态变为"🟢 战斗中"
4. [ ] 显示预计奖励
5. [ ] 点击"暂停"
6. [ ] 状态变为"⏸️ 暂停休息"
7. [ ] 点击"继续"
8. [ ] 状态恢复为"🟢 战斗中"
9. [ ] 点击"结束战斗"
10. [ ] 显示飘字动画
11. [ ] 显示奖励对话框
12. [ ] 金币和经验值增加

**场景2: 有项目工作**
1. [ ] 创建测试项目（预估10小时）
2. [ ] 返回主页，点击任务卡片选择项目
3. [ ] 开始工作
4. [ ] BOSS血条显示
5. [ ] 工作1分钟后结束
6. [ ] 项目进度增加
7. [ ] 获得奖励

**场景3: 连击奖励测试**
1. [ ] 开始工作
2. [ ] 不要点击暂停
3. [ ] 工作45分钟后，查看连击提示
4. [ ] 应显示"还差 X 分钟触发连击奖励"
5. [ ] 工作60分钟后
6. [ ] 应显示"🔥 连击奖励已激活！+50金币"
7. [ ] 结束工作
8. [ ] 奖励对话框应包含连击奖励

#### 项目切换测试
1. [ ] 创建多个项目
2. [ ] 在空闲状态点击任务卡片
3. [ ] 底部抽屉弹出
4. [ ] 可以看到所有活跃项目
5. [ ] 选择一个项目
6. [ ] 任务卡片更新显示
7. [ ] BOSS血条显示正确

#### 动画测试
1. [ ] 按钮点击有缩放反馈
2. [ ] 飘字动画流畅
3. [ ] 页面切换平滑
4. [ ] 无卡顿现象

---

## 🐛 已知问题

### 低优先级
1. **withOpacity 弃用警告**
   - 影响：多个组件使用了已弃用的 API
   - 解决方案：后续统一替换为 withValues(alpha: x)
   - 状态：不影响功能

---

## 📊 性能测试

### 内存使用
**测试步骤**:
1. 启动应用
2. 记录初始内存使用
3. 进行以下操作：
   - 开始/结束工作 10次
   - 切换项目 5次
   - 触发飘字动画 5次
4. 检查：
   - [ ] 内存使用稳定
   - [ ] 无明显内存泄漏

### 帧率
**测试步骤**:
1. 启动应用
2. 打开 Flutter DevTools
3. 检查：
   - [ ] 空闲时帧率稳定
   - [ ] 动画时帧率 > 30fps
   - [ ] 无明显掉帧

---

## 🎨 视觉测试

### 亮色模式
- [ ] 背景色正确（浅灰）
- [ ] 卡片背景正确（白色）
- [ ] 文字颜色正确（深色）
- [ ] 阴影显示正确

### 暗色模式（如果支持）
- [ ] 背景色正确（深色）
- [ ] 卡片背景正确（深灰）
- [ ] 文字颜色正确（浅色）
- [ ] 阴影显示正确

### 响应式
- [ ] 手机屏幕显示正常
- [ ] 平板屏幕显示正常
- [ ] 桌面屏幕显示正常

---

## 🔄 回归测试

### 原有功能
- [ ] 统计页面正常
- [ ] 成就页面正常
- [ ] 商店页面正常（旧版）
- [ ] 项目管理页面正常
- [ ] 设置页面正常

### 数据持久化
- [ ] 工作记录保存正确
- [ ] 金币和经验保存正确
- [ ] 项目进度保存正确
- [ ] 重启应用后数据正常

---

## 📝 测试报告模板

### 测试环境
- **操作系统**: Windows/macOS/Linux
- **Flutter 版本**: 3.41.2
- **测试日期**: YYYY-MM-DD
- **测试人员**: [姓名]

### 测试结果
- **通过**: X / Y
- **失败**: X / Y
- **阻塞问题**: X

### 问题列表
| 编号 | 问题描述 | 严重程度 | 状态 |
|------|----------|----------|------|
| 1    | ...      | 高/中/低 | 待修复 |

### 建议
- ...

---

## 🚀 快速修复指南

### 问题：应用无法启动
**解决方案**:
```bash
flutter clean
flutter pub get
flutter run
```

### 问题：热重载不生效
**解决方案**:
按 `R` 进行完全重启

### 问题：组件显示异常
**解决方案**:
1. 检查 pubspec.yaml 依赖是否安装
2. 运行 `flutter pub get`
3. 完全重启应用

### 问题：数据不同步
**解决方案**:
1. 检查 Hive 数据库是否正常
2. 清除应用数据重新测试
3. 检查 Provider 状态管理

---

## 📞 支持

### 遇到问题？
1. 查看控制台错误信息
2. 检查本测试指南
3. 查看 UI_REDESIGN_PLAN_v1.2.0.md
4. 查看组件文档 UI_COMPONENTS_SHOWCASE.md

---

**创建日期**: 2026-02-26  
**维护者**: 开发团队  
**版本**: v1.2.0
