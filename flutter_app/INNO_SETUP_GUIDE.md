# Inno Setup å®‰è£…å’Œä½¿ç”¨æŒ‡å—

## ğŸ“¥ ä¸‹è½½å’Œå®‰è£… Inno Setup

### æ–¹æ³• 1ï¼šå®˜æ–¹ç½‘ç«™ä¸‹è½½ï¼ˆæ¨èï¼‰

1. è®¿é—®å®˜æ–¹ç½‘ç«™ï¼šhttps://jrsoftware.org/isdl.php
2. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼ˆInno Setup 6.xï¼‰
3. è¿è¡Œå®‰è£…ç¨‹åºï¼Œä½¿ç”¨é»˜è®¤è®¾ç½®å®‰è£…
4. å®‰è£…ä½ç½®é€šå¸¸ä¸ºï¼š`C:\Program Files (x86)\Inno Setup 6\`

### æ–¹æ³• 2ï¼šä½¿ç”¨ Chocolateyï¼ˆå¦‚æœå·²å®‰è£…ï¼‰

```powershell
choco install innosetup
```

### æ–¹æ³• 3ï¼šä½¿ç”¨ wingetï¼ˆWindows 11ï¼‰

```powershell
winget install JRSoftware.InnoSetup
```

## ğŸŒ ä¸­æ–‡è¯­è¨€åŒ…ï¼ˆå¯é€‰ï¼‰

Inno Setup 6 å·²å†…ç½®ä¸­æ–‡è¯­è¨€æ”¯æŒï¼Œæ— éœ€é¢å¤–ä¸‹è½½ã€‚

## âœ… éªŒè¯å®‰è£…

å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
- `C:\Program Files (x86)\Inno Setup 6\ISCC.exe` - å‘½ä»¤è¡Œç¼–è¯‘å™¨
- `C:\Program Files (x86)\Inno Setup 6\Compil32.exe` - GUIç¼–è¯‘å™¨

## ğŸš€ ä½¿ç”¨ Inno Setup åˆ›å»ºå®‰è£…ç¨‹åº

### æ–¹æ³• 1ï¼šä½¿ç”¨ GUIï¼ˆå›¾å½¢ç•Œé¢ï¼‰

1. æ‰“å¼€ Inno Setup Compiler
2. ç‚¹å‡» File â†’ Open
3. é€‰æ‹© `flutter_app\installer.iss`
4. ç‚¹å‡» Build â†’ Compileï¼ˆæˆ–æŒ‰ Ctrl+F9ï¼‰
5. ç­‰å¾…ç¼–è¯‘å®Œæˆ
6. å®‰è£…ç¨‹åºç”Ÿæˆåœ¨ï¼š`flutter_app\installer_output\WorkHoursTimer-Setup-v1.0.0.exe`

### æ–¹æ³• 2ï¼šä½¿ç”¨å‘½ä»¤è¡Œ

```batch
"C:\Program Files (x86)\Inno Setup 6\ISCC.exe" "flutter_app\installer.iss"
```

### æ–¹æ³• 3ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰

è¿è¡Œ `flutter_app\create-installer.bat`

## ğŸ“‹ åˆ›å»ºå®‰è£…ç¨‹åºçš„å®Œæ•´æµç¨‹

1. æ„å»º Release ç‰ˆæœ¬
   ```batch
   cd flutter_app
   build-release.bat
   ```

2. åˆ›å»ºå®‰è£…ç¨‹åº
   ```batch
   create-installer.bat
   ```

3. æµ‹è¯•å®‰è£…ç¨‹åº
   - åŒå‡» `installer_output\WorkHoursTimer-Setup-v1.0.0.exe`
   - æŒ‰ç…§å‘å¯¼å®Œæˆå®‰è£…
   - æµ‹è¯•åº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œ

## ğŸ”§ è‡ªå®šä¹‰å®‰è£…ç¨‹åº

ç¼–è¾‘ `installer.iss` æ–‡ä»¶å¯ä»¥è‡ªå®šä¹‰ï¼š

- åº”ç”¨åç§°å’Œç‰ˆæœ¬
- å®‰è£…ç›®å½•
- å¼€å§‹èœå•é¡¹
- æ¡Œé¢å›¾æ ‡
- è®¸å¯åè®®
- å®‰è£…å‰/åè¯´æ˜
- è‡ªå®šä¹‰å›¾æ ‡

## ğŸ“¦ å®‰è£…ç¨‹åºç‰¹æ€§

æˆ‘ä»¬çš„å®‰è£…ç¨‹åºåŒ…å«ï¼š

- âœ… ä¸­æ–‡ç•Œé¢
- âœ… è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿæ¶æ„ï¼ˆä»…æ”¯æŒ x64ï¼‰
- âœ… åˆ›å»ºå¼€å§‹èœå•å¿«æ·æ–¹å¼
- âœ… å¯é€‰åˆ›å»ºæ¡Œé¢å›¾æ ‡
- âœ… å®Œæ•´çš„å¸è½½æ”¯æŒ
- âœ… ä¸éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆå®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼‰
- âœ… ç°ä»£åŒ–çš„å®‰è£…å‘å¯¼ç•Œé¢

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šæ‰¾ä¸åˆ° ISCC.exe

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®è®¤ Inno Setup å·²æ­£ç¡®å®‰è£…
- æ£€æŸ¥å®‰è£…è·¯å¾„æ˜¯å¦ä¸ºé»˜è®¤è·¯å¾„
- å¦‚æœå®‰è£…åœ¨å…¶ä»–ä½ç½®ï¼Œä¿®æ”¹ `create-installer.bat` ä¸­çš„è·¯å¾„

### é—®é¢˜ 2ï¼šç¼–è¯‘å¤±è´¥ - æ‰¾ä¸åˆ°æºæ–‡ä»¶

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Source file not found: build\windows\x64\runner\Release\work_hours_timer.exe
```

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®ä¿å·²è¿è¡Œ `build-release.bat` æ„å»º Release ç‰ˆæœ¬
- æ£€æŸ¥ `build\windows\x64\runner\Release\` ç›®å½•æ˜¯å¦å­˜åœ¨
- ç¡®è®¤ `work_hours_timer.exe` æ–‡ä»¶å­˜åœ¨

### é—®é¢˜ 3ï¼šå®‰è£…ç¨‹åºæ— æ³•è¿è¡Œ

**å¯èƒ½åŸå› ï¼š**
- è¢«æ€æ¯’è½¯ä»¶é˜»æ­¢
- æ–‡ä»¶æŸå
- ç³»ç»Ÿä¸å…¼å®¹

**è§£å†³æ–¹æ¡ˆï¼š**
- å°†å®‰è£…ç¨‹åºæ·»åŠ åˆ°æ€æ¯’è½¯ä»¶ç™½åå•
- é‡æ–°ç¼–è¯‘å®‰è£…ç¨‹åº
- ç¡®è®¤ç›®æ ‡ç³»ç»Ÿä¸º Windows 10 x64 æˆ–æ›´é«˜ç‰ˆæœ¬

## ğŸ“Š æ–‡ä»¶å¤§å°å‚è€ƒ

- Release æ„å»ºï¼šçº¦ 25-30 MB
- å®‰è£…ç¨‹åºï¼šçº¦ 30-40 MBï¼ˆåŒ…å«å‹ç¼©ï¼‰
- å®‰è£…åå ç”¨ï¼šçº¦ 40-50 MB

## ğŸ” ä»£ç ç­¾åï¼ˆå¯é€‰ï¼‰

ä¸ºäº†é¿å… Windows SmartScreen è­¦å‘Šï¼Œå¯ä»¥å¯¹å®‰è£…ç¨‹åºè¿›è¡Œä»£ç ç­¾åï¼š

1. è·å–ä»£ç ç­¾åè¯ä¹¦
2. ä½¿ç”¨ SignTool ç­¾å
3. æˆ–åœ¨ Inno Setup ä¸­é…ç½®è‡ªåŠ¨ç­¾å

è¯¦ç»†è¯´æ˜ï¼šhttps://jrsoftware.org/ishelp/topic_setup_signtool.htm

## ğŸ“š æ›´å¤šèµ„æº

- Inno Setup å®˜æ–¹æ–‡æ¡£ï¼šhttps://jrsoftware.org/ishelp/
- ç¤ºä¾‹è„šæœ¬ï¼š`C:\Program Files (x86)\Inno Setup 6\Examples\`
- ä¸­æ–‡æ•™ç¨‹ï¼šæœç´¢ "Inno Setup ä¸­æ–‡æ•™ç¨‹"

## ğŸ¯ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```batch
# æ„å»º Release
cd flutter_app
build-release.bat

# åˆ›å»ºä¾¿æºç‰ˆ
package-portable.bat

# åˆ›å»ºå®‰è£…ç¨‹åºï¼ˆéœ€è¦å…ˆå®‰è£… Inno Setupï¼‰
create-installer.bat

# æ‰‹åŠ¨ç¼–è¯‘ï¼ˆå¦‚æœæ‰¹å¤„ç†å¤±è´¥ï¼‰
"C:\Program Files (x86)\Inno Setup 6\ISCC.exe" installer.iss
```

---

**æç¤ºï¼š** å¦‚æœä¸æƒ³å®‰è£… Inno Setupï¼Œå¯ä»¥ä½¿ç”¨ `package-portable.bat` åˆ›å»ºä¾¿æºç‰ˆï¼ˆç»¿è‰²ç‰ˆï¼‰ï¼Œç”¨æˆ·è§£å‹å³å¯ä½¿ç”¨ã€‚
