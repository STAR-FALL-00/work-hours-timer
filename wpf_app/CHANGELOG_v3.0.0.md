# 📝 Work Hours Timer v3.0.0 更新日志

## 🎉 重大更新：WPF 重构版本

Work Hours Timer v3.0.0 是一个完全重构的版本，从 Flutter 迁移到 WPF，带来了全新的桌面挂件体验！

---

## ✨ 新增功能

### 🎮 桌面挂件系统
- **像素风格动画挂件** - 活着的桌面伙伴
  - 勇者骑士角色（Hero Knight）
  - 史莱姆 Boss 角色（Slime Enemy）
  - 流畅的帧动画系统（60 FPS）
  - 多种动作：待机、攻击、跑步、翻滚、格挡等

### ⚔️ 完整战斗系统
- **智能 AI 战斗** - 自动化战斗循环
  - 接近阶段：勇者追击，Boss 跳跃躲避
  - 战斗阶段：攻击、格挡、翻滚等多种战斗动作
  - 撤退阶段：Boss 逃跑，勇者返回
  - 冷却阶段：等待下一轮战斗
- **抛物线跳跃** - Boss 使用真实物理跳跃移动
- **动态位移** - 击退和翻滚效果

### ⏰ 基于时间的血条系统
- **实时血量更新** - 根据当前时间自动计算
- **自定义工作时间** - 支持设置上班和下班时间
  - 默认：9:00 - 18:00
  - 可调整为任意时间段
  - 血量随时间流逝自动减少
- **独立定时器** - 即使不工作也会显示时间进度

### 🎨 现代化 UI
- **WPF-UI 框架** - 基于 Windows 11 设计语言
- **Mica 背景效果** - 半透明毛玻璃效果
- **深色主题** - 护眼的暗色界面
- **流畅动画** - 原生 WPF 动画效果

### 📊 完整功能保留
- ✅ 计时器功能（开始/暂停/停止）
- ✅ 项目管理（创建/编辑/删除/切换）
- ✅ 统计功能（今日统计/按项目统计/导出数据）
- ✅ 托盘图标（最小化到托盘/托盘菜单）
- ✅ 全局快捷键（Ctrl+Alt+S/E/H/W）
- ✅ 自动隐藏侧边栏
- ✅ 游戏化系统（等级/经验/金币）
- ✅ 成就系统

---

## 🔧 技术改进

### 性能优化
- **原生 WPF 渲染** - 更流畅的动画性能
- **图片预加载和缓存** - 消除动画闪烁
- **60 FPS 帧动画** - 丝滑的动画体验
- **动画状态缓存** - 减少不必要的更新

### 架构升级
- **MVVM 架构** - 清晰的代码结构
- **依赖注入** - 单例服务模式
- **事件驱动** - 窗口间消息通信
- **模块化设计** - 易于维护和扩展

### 数据持久化
- **JSON 存储** - 人类可读的配置文件
- **自动保存** - 数据实时保存
- **向后兼容** - 保留原有数据结构

---

## 🎯 核心特性

### 挂件窗口
- 透明背景，无边框
- 可拖动，可置顶
- 实时战斗动画
- 基于时间的血条

### 主窗口
- 固定在屏幕右侧
- 自动隐藏功能
- 完整的功能面板
- 统计数据展示

### 设置系统
- 工作时间自定义
- 快捷键配置
- 项目管理
- 数据导出

---

## 📦 安装说明

### 系统要求
- Windows 10/11 (64-bit)
- .NET 8.0 Runtime（首次运行会自动提示安装）

### 安装步骤
1. 下载 `WorkHoursTimer-v3.0-Portable.zip`
2. 解压到任意目录
3. 运行 `WorkHoursTimer.exe`
4. 如果提示缺少 .NET Runtime，点击链接安装

### 便携版说明
- 无需安装，解压即用
- 数据保存在 `%APPDATA%\WorkHoursTimer\`
- 可以放在 U 盘中使用

---

## 🐛 已知问题

### 限制
- 仅支持 Windows 平台
- 需要 .NET 8.0 Runtime
- 不支持跨天工作时间（如 22:00 - 06:00）

### 计划改进
- [ ] 添加更多角色皮肤
- [ ] 支持自定义动画速度
- [ ] 添加音效系统
- [ ] 支持多显示器
- [ ] 添加更多战斗动作

---

## 🙏 致谢

### 素材来源
- **Hero Knight** - [itch.io](https://itch.io)
- **Slime Enemy** - [itch.io](https://itch.io)
- **WPF-UI** - [GitHub](https://github.com/lepoco/wpfui)

### 技术栈
- .NET 8.0
- WPF (Windows Presentation Foundation)
- WPF-UI 3.0
- CommunityToolkit.Mvvm 8.2

---

## 📄 许可证

MIT License - 详见 LICENSE 文件

---

## 🔗 相关链接

- [GitHub 仓库](https://github.com/your-username/work-hours-timer)
- [问题反馈](https://github.com/your-username/work-hours-timer/issues)
- [使用文档](https://github.com/your-username/work-hours-timer/wiki)

---

**发布日期**: 2026-02-28  
**版本号**: v3.0.0  
**构建**: WPF Release
