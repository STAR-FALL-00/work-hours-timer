# Work Hours Timer v3.0 - 任务列表

**版本**: v3.0 (WPF Edition)  
**开始日期**: 2026-02-27  
**预计完成**: 2026-03-19  
**总工期**: 3-4 周

---

## 📊 进度概览

```
总任务数: 85
已完成: 25 (29.4%)
进行中: 0
待开始: 60
```

### 按优先级
- P0 (必须): 45 个
- P1 (重要): 25 个
- P2 (可选): 15 个

### 按模块
- 环境搭建: 10 个 ✅
- 框架开发: 15 个
- 业务逻辑: 25 个
- UI 实现: 20 个
- 测试优化: 15 个

---

## 🗓️ Week 1: 框架与通信 (2026-02-27 ~ 03-05)

### Day 1: 环境搭建 (2026-02-27 周四) ✅ 完成

#### 环境准备
- [x] 创建技术栈迁移文档
- [x] 创建开发计划文档
- [x] 创建设计规范文档
- [x] 创建任务列表
- [x] 安装 Visual Studio 2022（用户已安装 .NET SDK）
- [x] 验证 .NET 8 SDK

#### 项目初始化
- [x] 创建 WPF 解决方案
- [x] 创建项目结构
- [x] 安装 NuGet 包
  - [x] WPF-UI
  - [x] CommunityToolkit.Mvvm
  - [x] XamlAnimatedGif
  - [x] System.Text.Json

#### 主窗口基础
- [x] 配置 WPF-UI 主题
- [x] 创建 MainWindow.xaml
- [x] 实现窗口右侧停靠
- [x] 测试 Mica/Acrylic 背景
- [x] 验证窗口显示正常

**交付物**: ✅ 主窗口可以显示并停靠在右侧，应用成功运行

---

### Day 2: 挂件窗口 (2026-02-28 周五)

#### 窗口创建
- [ ] 创建 WidgetWindow.xaml
- [ ] 设置透明背景
- [ ] 设置无边框样式
- [ ] 实现窗口置顶

#### 交互功能
- [ ] 实现窗口拖拽
- [ ] 设置默认位置（右下角）
- [ ] 添加简单内容显示
- [ ] 测试窗口显示

#### 主窗口集成
- [ ] 添加"创建挂件"按钮
- [ ] 实现挂件窗口创建逻辑
- [ ] 测试双窗口同时运行

**交付物**: 挂件窗口可以显示、拖拽和置顶

---

### Day 3: 鼠标穿透 (2026-03-01 周六)

#### Win32 API 封装
- [ ] 创建 Helpers/Win32Helper.cs
- [ ] 实现 SetClickThrough 方法
- [ ] 添加 Win32 API 声明
- [ ] 测试 API 调用

#### 智能穿透逻辑
- [ ] 监听鼠标进入事件
- [ ] 监听鼠标离开事件
- [ ] 实现自动切换穿透状态
- [ ] 测试穿透功能

#### 边界情况处理
- [ ] 处理多显示器
- [ ] 处理窗口最小化
- [ ] 处理窗口关闭
- [ ] 完整测试

**交付物**: 鼠标穿透功能正常工作

---

### Day 4-5: 窗口通信 (2026-03-02~03 周日-周一)

#### 通信服务
- [ ] 创建 Services/WindowMessenger.cs
- [ ] 实现事件总线
- [ ] 定义消息类型
- [ ] 实现消息发送

#### 主窗口集成
- [ ] 订阅消息事件
- [ ] 实现消息发送
- [ ] 添加测试按钮
- [ ] 测试发送功能

#### 挂件窗口集成
- [ ] 订阅消息事件
- [ ] 实现消息接收
- [ ] 更新 UI 显示
- [ ] 测试接收功能

#### 通信协议
- [ ] 实现 UPDATE_TIMER 消息
- [ ] 实现 UPDATE_RESOURCES 消息
- [ ] 实现 SWITCH_SKIN 消息
- [ ] 实现 WIDGET_MOVED 消息

**交付物**: 两个窗口可以互相通信

---

### Day 6-7: 优化与测试 (2026-03-04~05 周二-周三)

#### 性能优化
- [ ] 测试内存占用
- [ ] 优化启动时间
- [ ] 优化 CPU 占用
- [ ] 性能分析报告

#### 窗口动画
- [ ] 主窗口滑入动画
- [ ] 主窗口滑出动画
- [ ] 挂件窗口淡入
- [ ] 挂件窗口淡出

#### 自动隐藏
- [ ] 实现鼠标边缘检测
- [ ] 实现自动隐藏逻辑
- [ ] 实现自动显示逻辑
- [ ] 测试自动隐藏

#### 配置保存
- [ ] 保存窗口位置
- [ ] 保存窗口状态
- [ ] 加载配置
- [ ] 测试配置持久化

#### Sprint 1 总结
- [ ] 编写完成报告
- [ ] 更新任务列表
- [ ] 准备 Sprint 2

**交付物**: Sprint 1 完成，框架稳定

---

## 🗓️ Week 2: 业务逻辑 (2026-03-06 ~ 03-12)

### Day 8-9: MVVM 架构 (2026-03-06~07 周四-周五)

#### 数据模型
- [ ] 创建 Models/WorkRecord.cs
- [ ] 创建 Models/Project.cs
- [ ] 创建 Models/Settings.cs
- [ ] 创建 Models/AdventurerProfile.cs

#### 视图模型
- [ ] 创建 ViewModels/MainViewModel.cs
- [ ] 创建 ViewModels/TimerViewModel.cs
- [ ] 创建 ViewModels/StatsViewModel.cs
- [ ] 创建 ViewModels/WidgetViewModel.cs

#### MVVM 绑定
- [ ] 配置 CommunityToolkit.Mvvm
- [ ] 实现 ObservableProperty
- [ ] 实现 RelayCommand
- [ ] 测试数据绑定

**交付物**: MVVM 架构搭建完成

---

### Day 10-11: 核心服务 (2026-03-08~09 周六-周日)

#### 计时器服务
- [ ] 创建 Services/TimerService.cs
- [ ] 实现开始/暂停/停止
- [ ] 实现时间计算
- [ ] 实现午休逻辑

#### 项目服务
- [ ] 创建 Services/ProjectService.cs
- [ ] 实现项目 CRUD
- [ ] 实现项目切换
- [ ] 实现工时统计

#### 经济服务
- [ ] 创建 Services/EconomyService.cs
- [ ] 实现金币计算
- [ ] 实现经验值计算
- [ ] 实现等级系统

#### 成就服务
- [ ] 创建 Services/AchievementService.cs
- [ ] 定义成就列表
- [ ] 实现成就检测
- [ ] 实现成就解锁

**交付物**: 核心业务逻辑可用

---

### Day 12-13: 数据持久化 (2026-03-10~11 周一-周二)

#### JSON 存储
- [ ] 创建 Services/DataService.cs
- [ ] 实现数据序列化
- [ ] 实现数据反序列化
- [ ] 实现自动保存

#### 数据迁移
- [ ] 创建 Services/MigrationService.cs
- [ ] 读取 Flutter Hive 数据
- [ ] 转换为 JSON 格式
- [ ] 导入到 WPF 应用

#### 数据验证
- [ ] 验证数据完整性
- [ ] 处理数据错误
- [ ] 创建备份
- [ ] 测试迁移工具

**交付物**: 数据持久化完成

---

### Day 14: 集成测试 (2026-03-12 周三)

#### 功能测试
- [ ] 测试计时器功能
- [ ] 测试项目管理
- [ ] 测试数据保存
- [ ] 测试数据加载

#### Bug 修复
- [ ] 修复发现的 Bug
- [ ] 优化性能问题
- [ ] 改进用户体验

#### Sprint 2 总结
- [ ] 编写完成报告
- [ ] 更新任务列表
- [ ] 准备 Sprint 3

**交付物**: Sprint 2 完成，功能可用

---

## 🗓️ Week 3: UI 与动画 (2026-03-13 ~ 03-19)

### Day 15-16: 主窗口 UI (2026-03-13~14 周四-周五)

#### Tab 导航
- [ ] 创建 Tab 控件
- [ ] 实现 Tab 切换
- [ ] 添加 Tab 图标
- [ ] 添加 Tab 动画

#### 计时器页面
- [ ] 设计计时器 UI
- [ ] 实现项目列表
- [ ] 实现开始按钮
- [ ] 添加状态显示

#### 统计页面
- [ ] 设计统计 UI
- [ ] 实现收益卡片
- [ ] 实现工时图表
- [ ] 添加数据展示

#### 设置页面
- [ ] 设计设置 UI
- [ ] 实现设置项
- [ ] 实现主题切换
- [ ] 实现数据导出

**交付物**: 主窗口 UI 完成

---

### Day 17-18: 挂件 UI (2026-03-15~16 周六-周日)

#### 勇者模式
- [ ] 设计勇者模式 UI
- [ ] 导入像素素材
- [ ] 实现 GIF 动画
- [ ] 实现血条显示

#### 跑酷模式
- [ ] 设计跑酷模式 UI
- [ ] 导入猫咪素材
- [ ] 实现跑步动画
- [ ] 实现进度条

#### 皮肤切换
- [ ] 实现皮肤选择
- [ ] 实现皮肤切换
- [ ] 保存皮肤设置
- [ ] 测试皮肤功能

**交付物**: 挂件窗口 UI 完成

---

### Day 19-20: 动画与音效 (2026-03-17~18 周一-周二)

#### 过渡动画
- [ ] 实现淡入淡出
- [ ] 实现滑入滑出
- [ ] 实现缩放动画
- [ ] 实现旋转动画

#### 数值动画
- [ ] 实现金币滚动
- [ ] 实现经验值填充
- [ ] 实现飘字效果
- [ ] 实现进度条动画

#### 音效系统
- [ ] 创建 Services/AudioService.cs
- [ ] 导入音效文件
- [ ] 实现音效播放
- [ ] 实现音量控制

**交付物**: 动画和音效完成

---

### Day 21: 最终优化 (2026-03-19 周三)

#### 性能优化
- [ ] 优化内存占用
- [ ] 优化启动时间
- [ ] 优化动画性能
- [ ] 性能测试报告

#### UI 抛光
- [ ] 调整颜色
- [ ] 调整间距
- [ ] 调整字体
- [ ] 调整动画

#### 最终测试
- [ ] 完整功能测试
- [ ] 性能测试
- [ ] 兼容性测试
- [ ] 用户体验测试

#### Sprint 3 总结
- [ ] 编写完成报告
- [ ] 更新文档
- [ ] 准备发布

**交付物**: Sprint 3 完成，v3.0 可发布

---

## 📋 按模块分类

### 🏗️ 框架模块 (15 个任务)

#### 窗口管理
- [ ] 主窗口创建
- [ ] 挂件窗口创建
- [ ] 窗口停靠
- [ ] 窗口置顶
- [ ] 窗口拖拽

#### 窗口特效
- [ ] Mica 背景
- [ ] Acrylic 背景
- [ ] 透明背景
- [ ] 鼠标穿透
- [ ] 窗口动画

#### 窗口通信
- [ ] 事件总线
- [ ] 消息发送
- [ ] 消息接收
- [ ] 消息路由
- [ ] 通信测试

---

### 💼 业务模块 (25 个任务)

#### 计时功能
- [ ] 开始工作
- [ ] 暂停工作
- [ ] 结束工作
- [ ] 午休功能
- [ ] 时间计算

#### 项目管理
- [ ] 创建项目
- [ ] 编辑项目
- [ ] 删除项目
- [ ] 项目切换
- [ ] 工时统计

#### 游戏化
- [ ] 金币系统
- [ ] 经验系统
- [ ] 等级系统
- [ ] 成就系统
- [ ] 每日任务

#### 数据管理
- [ ] 数据保存
- [ ] 数据加载
- [ ] 数据导出
- [ ] 数据导入
- [ ] 数据迁移

---

### 🎨 UI 模块 (20 个任务)

#### 主窗口
- [ ] Tab 导航
- [ ] 计时器页面
- [ ] 统计页面
- [ ] 设置页面
- [ ] 主题切换

#### 挂件窗口
- [ ] 勇者模式
- [ ] 跑酷模式
- [ ] 皮肤切换
- [ ] GIF 动画
- [ ] 状态显示

#### 组件
- [ ] 计时器显示
- [ ] 项目卡片
- [ ] 资源胶囊
- [ ] 行动按钮
- [ ] 统计图表

---

### 🧪 测试模块 (15 个任务)

#### 功能测试
- [ ] 计时器测试
- [ ] 项目管理测试
- [ ] 数据保存测试
- [ ] 窗口通信测试
- [ ] 皮肤切换测试

#### 性能测试
- [ ] 内存占用测试
- [ ] 启动时间测试
- [ ] CPU 占用测试
- [ ] 动画性能测试
- [ ] 响应时间测试

#### 兼容性测试
- [ ] Windows 10 测试
- [ ] Windows 11 测试
- [ ] 多显示器测试
- [ ] 高 DPI 测试
- [ ] 不同分辨率测试

---

## 📊 进度跟踪

### Week 1 进度
```
Day 1: ██████████ 100% (25/25) ✅
Day 2: ░░░░░░░░░░  0% (0/12)
Day 3: ░░░░░░░░░░  0% (0/10)
Day 4-5: ░░░░░░░░░░  0% (0/15)
Day 6-7: ░░░░░░░░░░  0% (0/15)
```

### Week 2 进度
```
Day 8-9: ░░░░░░░░░░  0% (0/12)
Day 10-11: ░░░░░░░░░░  0% (0/16)
Day 12-13: ░░░░░░░░░░  0% (0/12)
Day 14: ░░░░░░░░░░  0% (0/8)
```

### Week 3 进度
```
Day 15-16: ░░░░░░░░░░  0% (0/16)
Day 17-18: ░░░░░░░░░░  0% (0/12)
Day 19-20: ░░░░░░░░░░  0% (0/12)
Day 21: ░░░░░░░░░░  0% (0/12)
```

---

## 🎯 里程碑

### Milestone 1: 框架完成 (Week 1 结束)
- [ ] 双窗口可以运行
- [ ] 窗口通信正常
- [ ] 鼠标穿透功能
- [ ] 性能达标

### Milestone 2: 功能完成 (Week 2 结束)
- [ ] 计时器可用
- [ ] 数据可保存
- [ ] 核心功能完整
- [ ] 业务逻辑正确

### Milestone 3: UI 完成 (Week 3 结束)
- [ ] UI 美化完成
- [ ] 动画流畅
- [ ] 音效正常
- [ ] 用户体验良好

### Milestone 4: 发布就绪 (Week 4)
- [ ] 测试通过
- [ ] 文档完整
- [ ] 安装包制作
- [ ] 可以发布

---

## 📝 任务更新日志

### 2026-02-27
- [x] 创建任务列表
- [x] 定义所有任务
- [x] 设置优先级
- [x] 分配时间

---

**任务负责人**: Kiro AI Assistant  
**文档版本**: v1.0  
**最后更新**: 2026-02-27
