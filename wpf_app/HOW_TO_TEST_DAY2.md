# 🧪 Day 2 测试指南 - 鼠标穿透功能

## ⚠️ 重要提示

在重新构建之前，请先关闭正在运行的应用！

---

## 📋 测试步骤

### 步骤 1: 关闭旧应用

如果应用正在运行，请：
1. 点击主窗口的关闭按钮（X）
2. 或者在任务管理器中结束 `WorkHoursTimer.exe` 进程

### 步骤 2: 重新构建

```bash
cd E:\work\work\New-warm\timer\wpf_app
.\build-and-run.bat
```

### 步骤 3: 测试鼠标穿透

#### 测试 A: 默认穿透状态

1. ✅ 应用启动后，点击主窗口的"创建挂件窗口"按钮
2. ✅ 挂件窗口出现在右下角
3. ✅ 观察挂件窗口：
   - 状态文本显示：`🔒 穿透模式`
   - 边框颜色：灰色（#606070）
4. ✅ 测试穿透：
   - 在挂件窗口下方放一个桌面图标或文件
   - 尝试点击挂件窗口的透明区域
   - **预期结果**: 鼠标点击穿透，可以选中下方的图标

#### 测试 B: 鼠标进入（可拖拽）

1. ✅ 将鼠标移动到挂件窗口上
2. ✅ 观察变化：
   - 状态文本自动变为：`🔓 可拖拽`
   - 边框颜色变为：金色（#FFD700）
3. ✅ 测试拖拽：
   - 按住鼠标左键
   - 拖动挂件窗口到新位置
   - **预期结果**: 窗口可以正常拖拽

#### 测试 C: 鼠标离开（恢复穿透）

1. ✅ 将鼠标移出挂件窗口
2. ✅ 观察变化：
   - 状态文本自动变回：`🔒 穿透模式`
   - 边框颜色变回：灰色（#606070）
3. ✅ 测试穿透：
   - 再次尝试点击挂件窗口区域
   - **预期结果**: 鼠标再次穿透

---

## 🎯 预期效果

### 视觉效果

**穿透模式**:
```
┌─────────────────────┐
│  👾 像素挂件        │  ← 灰色边框
│  🔒 穿透模式        │
│  鼠标离开后自动穿透  │
└─────────────────────┘
```

**可拖拽模式**:
```
┌═════════════════════┐
│  👾 像素挂件        │  ← 金色边框
│  🔓 可拖拽          │
│  鼠标离开后自动穿透  │
└═════════════════════┘
```

### 交互流程

```
启动应用
   ↓
创建挂件窗口
   ↓
默认：穿透模式（灰色边框）
   ↓
鼠标移入 → 可拖拽模式（金色边框）
   ↓
鼠标移出 → 穿透模式（灰色边框）
   ↓
循环...
```

---

## 🐛 常见问题

### Q1: 构建失败，提示文件被锁定？

**原因**: 应用仍在运行

**解决方案**:
1. 关闭应用窗口
2. 或者打开任务管理器，结束 `WorkHoursTimer.exe` 进程
3. 重新运行 `build-and-run.bat`

### Q2: 鼠标穿透不工作？

**检查项**:
1. ✅ 确认是 Windows 10/11 系统
2. ✅ 确认挂件窗口已创建
3. ✅ 确认状态显示为"🔒 穿透模式"
4. ✅ 尝试点击挂件窗口的中心区域

### Q3: 无法拖拽挂件窗口？

**检查项**:
1. ✅ 确认鼠标已移到挂件窗口上
2. ✅ 确认状态显示为"🔓 可拖拽"
3. ✅ 确认边框变为金色
4. ✅ 使用鼠标左键拖拽

### Q4: 状态不会自动切换？

**可能原因**:
- 鼠标事件未正确触发
- 检查代码是否正确实现了 `MouseEnter` 和 `MouseLeave` 事件

---

## 📸 建议截图

如果功能正常，建议截图保存：

1. **穿透模式截图**: 显示灰色边框和"🔒 穿透模式"
2. **可拖拽模式截图**: 显示金色边框和"🔓 可拖拽"
3. **拖拽过程截图**: 显示窗口正在移动

---

## ✅ 验收标准

Day 2 功能完整性检查：

- [ ] Win32Helper.cs 文件已创建
- [ ] WidgetWindow.xaml.cs 已更新
- [ ] WidgetWindow.xaml 已更新
- [ ] 应用可以成功构建
- [ ] 挂件窗口可以创建
- [ ] 默认状态为穿透模式
- [ ] 鼠标进入时自动切换到可拖拽模式
- [ ] 鼠标离开时自动恢复穿透模式
- [ ] 视觉反馈正常（边框颜色变化）
- [ ] 状态文本正确更新

---

## 🎉 测试成功后

如果所有测试通过，恭喜你！Day 2 的鼠标穿透功能已经完美实现！

接下来可以：
1. 体验一下这个神奇的功能
2. 尝试在不同位置放置挂件窗口
3. 感受"不打扰"的设计理念

---

## 📞 需要帮助？

如果遇到问题：
1. 查看 `wpf_app/SPRINT1_DAY2_COMPLETE.md` - 完整的实现说明
2. 查看 `wpf_app/SPRINT1_DEVELOPMENT_PLAN.md` - 开发计划
3. 检查代码是否与文档一致

---

**祝测试顺利！** 🚀

---

**文档版本**: v1.0  
**创建日期**: 2026-02-27  
**适用版本**: WPF v3.0 Sprint 1 Day 2
