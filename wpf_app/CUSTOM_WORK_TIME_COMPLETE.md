# âš™ï¸ è‡ªå®šä¹‰å·¥ä½œæ—¶é—´åŠŸèƒ½ - å®Œæˆ

## ðŸ“‹ å®žçŽ°å†…å®¹

### 1. æ‰©å±• Settings æ¨¡åž‹
- âœ… æ·»åŠ  `WorkStartHour` å±žæ€§ï¼ˆé»˜è®¤ 9ï¼‰
- âœ… æ·»åŠ  `WorkEndHour` å±žæ€§ï¼ˆé»˜è®¤ 18ï¼‰
- âœ… æ”¯æŒ JSON åºåˆ—åŒ–å’ŒæŒä¹…åŒ–

### 2. åˆ›å»ºå·¥ä½œæ—¶é—´è®¾ç½®å¯¹è¯æ¡†
- âœ… åˆ›å»º `WorkTimeSettingsDialog.xaml` - è®¾ç½®ç•Œé¢
- âœ… åˆ›å»º `WorkTimeSettingsDialog.xaml.cs` - ä¸šåŠ¡é€»è¾‘
- âœ… ä½¿ç”¨æ»‘å—æŽ§ä»¶é€‰æ‹©æ—¶é—´ï¼ˆ0-23 å°æ—¶ï¼‰
- âœ… å®žæ—¶æ˜¾ç¤ºå·¥ä½œæ—¶é•¿
- âœ… éªŒè¯æ—¶é—´æœ‰æ•ˆæ€§ï¼ˆä¸‹ç­æ—¶é—´å¿…é¡»æ™šäºŽä¸Šç­æ—¶é—´ï¼‰

### 3. é›†æˆåˆ°ä¸»çª—å£
- âœ… åœ¨ä¸»çª—å£æ·»åŠ  "âš™ï¸ å·¥ä½œæ—¶é—´è®¾ç½®" æŒ‰é’®
- âœ… æ·»åŠ  `WorkTimeSettings_Click` äº‹ä»¶å¤„ç†æ–¹æ³•
- âœ… æ˜¾ç¤ºè®¾ç½®æˆåŠŸæç¤º

### 4. æ›´æ–° WidgetViewModel
- âœ… ä¿®æ”¹ `UpdateBossHealthByTime()` æ–¹æ³•
- âœ… ä»Ž Settings è¯»å–å·¥ä½œæ—¶é—´ï¼Œä¸å†ç¡¬ç¼–ç 
- âœ… ç›‘å¬ `WORK_TIME_CHANGED` æ¶ˆæ¯
- âœ… è®¾ç½®å˜æ›´åŽç«‹å³åˆ·æ–°è¡€æ¡

## ðŸŽ¯ åŠŸèƒ½ç‰¹æ€§

### è®¾ç½®ç•Œé¢
```
â° è‡ªå®šä¹‰å·¥ä½œæ—¶é—´

ä¸Šç­æ—¶é—´
[========â—=====] 09:00

ä¸‹ç­æ—¶é—´
[==============â—] 18:00

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å·¥ä½œæ—¶é•¿ï¼š9 å°æ—¶    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ç¡®å®š] [å–æ¶ˆ]
```

### æ—¶é—´èŒƒå›´
- æœ€å°å€¼ï¼š0 ç‚¹ï¼ˆ00:00ï¼‰
- æœ€å¤§å€¼ï¼š23 ç‚¹ï¼ˆ23:00ï¼‰
- æ­¥è¿›ï¼š1 å°æ—¶
- é»˜è®¤ï¼š9:00 - 18:00

### éªŒè¯è§„åˆ™
- ä¸‹ç­æ—¶é—´å¿…é¡»æ™šäºŽä¸Šç­æ—¶é—´
- ä¸æ”¯æŒè·¨å¤©å·¥ä½œæ—¶é—´ï¼ˆå¦‚ 22:00 - 06:00ï¼‰
- æ—¶é—´ä»¥æ•´ç‚¹ä¸ºå•ä½

## ðŸ“ æ–°å¢žæ–‡ä»¶

1. **wpf_app/WorkHoursTimer/WorkTimeSettingsDialog.xaml**
   - WPF UI ç•Œé¢å®šä¹‰
   - ä½¿ç”¨ FluentWindow å’Œ WPF-UI æŽ§ä»¶
   - å“åº”å¼å¸ƒå±€

2. **wpf_app/WorkHoursTimer/WorkTimeSettingsDialog.xaml.cs**
   - å¯¹è¯æ¡†ä¸šåŠ¡é€»è¾‘
   - æ»‘å—äº‹ä»¶å¤„ç†
   - æ•°æ®éªŒè¯å’Œä¿å­˜

## ðŸ“ ä¿®æ”¹çš„æ–‡ä»¶

1. **wpf_app/WorkHoursTimer/Models/Settings.cs**
   - æ·»åŠ  `WorkStartHour` å’Œ `WorkEndHour` å±žæ€§

2. **wpf_app/WorkHoursTimer/ViewModels/WidgetViewModel.cs**
   - ä¿®æ”¹ `UpdateBossHealthByTime()` ä½¿ç”¨åŠ¨æ€æ—¶é—´
   - æ·»åŠ  `WORK_TIME_CHANGED` æ¶ˆæ¯å¤„ç†

3. **wpf_app/WorkHoursTimer/MainWindow.xaml**
   - æ·»åŠ å·¥ä½œæ—¶é—´è®¾ç½®æŒ‰é’®

4. **wpf_app/WorkHoursTimer/MainWindow.xaml.cs**
   - æ·»åŠ  `WorkTimeSettings_Click` æ–¹æ³•

## ðŸŽ® ä½¿ç”¨æµç¨‹

### 1. æ‰“å¼€è®¾ç½®
```
ä¸»çª—å£ â†’ "âš™ï¸ å·¥ä½œæ—¶é—´è®¾ç½®" æŒ‰é’® â†’ è®¾ç½®å¯¹è¯æ¡†
```

### 2. è°ƒæ•´æ—¶é—´
```
æ‹–åŠ¨æ»‘å— â†’ å®žæ—¶æ˜¾ç¤ºæ—¶é—´å’Œå·¥ä½œæ—¶é•¿ â†’ ç¡®è®¤æ— è¯¯
```

### 3. ä¿å­˜è®¾ç½®
```
ç‚¹å‡»"ç¡®å®š" â†’ éªŒè¯é€šè¿‡ â†’ ä¿å­˜åˆ° Settings â†’ å‘é€æ¶ˆæ¯ â†’ æŒ‚ä»¶ç«‹å³æ›´æ–°
```

### 4. è¡€æ¡æ›´æ–°
```
æŒ‚ä»¶æŽ¥æ”¶æ¶ˆæ¯ â†’ è°ƒç”¨ UpdateBossHealthByTime() â†’ æ ¹æ®æ–°æ—¶é—´è®¡ç®—è¡€é‡
```

## ðŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯ 1ï¼šæ ‡å‡†å·¥ä½œæ—¶é—´ï¼ˆ9:00-18:00ï¼‰
```
ä¸Šç­æ—¶é—´ï¼š09:00
ä¸‹ç­æ—¶é—´ï¼š18:00
å·¥ä½œæ—¶é•¿ï¼š9 å°æ—¶
```

### åœºæ™¯ 2ï¼šæ—©ç­ï¼ˆ8:00-17:00ï¼‰
```
ä¸Šç­æ—¶é—´ï¼š08:00
ä¸‹ç­æ—¶é—´ï¼š17:00
å·¥ä½œæ—¶é•¿ï¼š9 å°æ—¶
```

### åœºæ™¯ 3ï¼šæ™šç­ï¼ˆ10:00-19:00ï¼‰
```
ä¸Šç­æ—¶é—´ï¼š10:00
ä¸‹ç­æ—¶é—´ï¼š19:00
å·¥ä½œæ—¶é•¿ï¼š9 å°æ—¶
```

### åœºæ™¯ 4ï¼šçŸ­å·¥æ—¶ï¼ˆ9:00-15:00ï¼‰
```
ä¸Šç­æ—¶é—´ï¼š09:00
ä¸‹ç­æ—¶é—´ï¼š15:00
å·¥ä½œæ—¶é•¿ï¼š6 å°æ—¶
```

## ðŸ”§ æŠ€æœ¯ç»†èŠ‚

### è¡€æ¡è®¡ç®—å…¬å¼
```csharp
var now = DateTime.Now;
var workStartTime = new DateTime(now.Year, now.Month, now.Day, settings.WorkStartHour, 0, 0);
var workEndTime = new DateTime(now.Year, now.Month, now.Day, settings.WorkEndHour, 0, 0);
var totalWorkSeconds = (workEndTime - workStartTime).TotalSeconds;

if (now >= workStartTime && now <= workEndTime)
{
    var elapsedSeconds = (now - workStartTime).TotalSeconds;
    var progress = elapsedSeconds / totalWorkSeconds;
    BossHealth = Math.Max(0, 100 - (progress * 100));
}
```

### æ¶ˆæ¯é€šä¿¡
```csharp
// ä¸»çª—å£å‘é€
WindowMessenger.Instance.SendMessage("WORK_TIME_CHANGED", new
{
    StartHour = WorkStartHour,
    EndHour = WorkEndHour
});

// æŒ‚ä»¶æŽ¥æ”¶
case "WORK_TIME_CHANGED":
    UpdateBossHealthByTime();
    break;
```

### æ•°æ®æŒä¹…åŒ–
```csharp
// ä¿å­˜åˆ° Settings
settings.WorkStartHour = WorkStartHour;
settings.WorkEndHour = WorkEndHour;
DataService.Instance.SaveData();

// è‡ªåŠ¨ä¿å­˜åˆ° JSON æ–‡ä»¶
// %APPDATA%/WorkHoursTimer/app_data.json
```

## âœ… æµ‹è¯•å»ºè®®

1. **åŸºæœ¬åŠŸèƒ½æµ‹è¯•**
   - æ‰“å¼€è®¾ç½®å¯¹è¯æ¡†
   - è°ƒæ•´æ»‘å—ï¼Œè§‚å¯Ÿæ—¶é—´æ˜¾ç¤º
   - ä¿å­˜è®¾ç½®ï¼Œæ£€æŸ¥æ˜¯å¦æˆåŠŸ

2. **éªŒè¯æµ‹è¯•**
   - å°è¯•è®¾ç½®ä¸‹ç­æ—¶é—´æ—©äºŽä¸Šç­æ—¶é—´
   - éªŒè¯é”™è¯¯æç¤ºæ˜¯å¦æ˜¾ç¤º

3. **è¡€æ¡æ›´æ–°æµ‹è¯•**
   - ä¿®æ”¹å·¥ä½œæ—¶é—´åŽï¼Œè§‚å¯ŸæŒ‚ä»¶è¡€æ¡
   - éªŒè¯è¡€æ¡æ˜¯å¦æ ¹æ®æ–°æ—¶é—´è®¡ç®—

4. **æŒä¹…åŒ–æµ‹è¯•**
   - ä¿®æ”¹è®¾ç½®åŽå…³é—­åº”ç”¨
   - é‡æ–°æ‰“å¼€ï¼Œæ£€æŸ¥è®¾ç½®æ˜¯å¦ä¿ç•™

5. **è¾¹ç•Œæµ‹è¯•**
   - æµ‹è¯• 0:00 - 23:00 çš„æžç«¯æƒ…å†µ
   - æµ‹è¯•ç›¸åŒæ—¶é—´ï¼ˆå¦‚ 9:00 - 9:00ï¼‰

## ðŸŽ‰ å®ŒæˆçŠ¶æ€

- âœ… Settings æ¨¡åž‹å·²æ‰©å±•
- âœ… è®¾ç½®å¯¹è¯æ¡†å·²åˆ›å»º
- âœ… ä¸»çª—å£é›†æˆå®Œæˆ
- âœ… WidgetViewModel å·²æ›´æ–°
- âœ… æ¶ˆæ¯é€šä¿¡å·²å®žçŽ°
- âœ… ä»£ç ç¼–è¯‘é€šè¿‡ï¼ˆéœ€å…³é—­è¿è¡Œä¸­çš„åº”ç”¨ï¼‰

## ðŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **å¢žå¼ºåŠŸèƒ½**
   - æ”¯æŒåˆ†é’Ÿçº§ç²¾åº¦ï¼ˆå¦‚ 9:30 - 18:30ï¼‰
   - æ”¯æŒè·¨å¤©å·¥ä½œæ—¶é—´
   - æ·»åŠ é¢„è®¾æ¨¡æ¿ï¼ˆæ—©ç­ã€ä¸­ç­ã€æ™šç­ï¼‰

2. **UI ä¼˜åŒ–**
   - æ·»åŠ æ—¶é—´é€‰æ‹©å™¨ï¼ˆTimePickerï¼‰
   - æ˜¾ç¤ºå½“å‰è¡€é‡é¢„è§ˆ
   - æ·»åŠ é‡ç½®ä¸ºé»˜è®¤æŒ‰é’®

3. **æé†’åŠŸèƒ½**
   - ä¸Šç­å‰ 15 åˆ†é’Ÿæé†’
   - ä¸‹ç­æ—¶é—´åˆ°è¾¾æé†’
   - åŠ ç­æ—¶é—´æé†’

---

**ä½¿ç”¨æç¤º**ï¼š
- é¦–æ¬¡ä½¿ç”¨é»˜è®¤ä¸º 9:00-18:00
- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯
- è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°
- å¯éšæ—¶è°ƒæ•´ä»¥é€‚åº”ä¸åŒå·¥ä½œæ—¶é—´
