<ui:FluentWindow x:Class="WorkHoursTimer.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 Title="Work Hours Timer"
                 Width="340"
                 Height="800"
                 WindowBackdropType="Mica"
                 ExtendsContentIntoTitleBar="True"
                 WindowStartupLocation="Manual"
                 ResizeMode="NoResize"
                 ShowInTaskbar="False"
                 Topmost="True">
    
    <Grid Background="{DynamicResource ApplicationBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- æ ‡é¢˜æ  -->
        <ui:TitleBar Grid.Row="0" Title="Work Hours Timer"/>
        
        <!-- å†…å®¹åŒºåŸŸ -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      Margin="8,0,8,0">
            <StackPanel Margin="8">
                <TextBlock Text="ðŸš€ WPF v3.0"
                           FontSize="32"
                           FontWeight="Bold"
                           Foreground="{StaticResource AccentGold}"
                           HorizontalAlignment="Center"/>
                
                <TextBlock Text="Sprint 1 - Day 5"
                           FontSize="16"
                           Foreground="{StaticResource TextSecondary}"
                           HorizontalAlignment="Center"
                           Margin="0,8,0,0"/>
                
                <!-- è®¡æ—¶å™¨æ˜¾ç¤º -->
                <Border Background="#20FFFFFF"
                        BorderBrush="{StaticResource AccentGold}"
                        BorderThickness="2"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,32,0,0">
                    <StackPanel>
                        <TextBlock Text="â±ï¸ è®¡æ—¶å™¨"
                                   FontSize="14"
                                   Foreground="{StaticResource TextSecondary}"
                                   HorizontalAlignment="Center"/>
                        
                        <TextBlock x:Name="TimerDisplay"
                                   Text="00:00:00"
                                   FontSize="36"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource TextPrimary}"
                                   HorizontalAlignment="Center"
                                   Margin="0,8,0,0"/>
                        
                        <TextBlock x:Name="ProjectDisplay"
                                   Text="æœªå¼€å§‹"
                                   FontSize="12"
                                   Foreground="{StaticResource TextSecondary}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- é¡¹ç›®é€‰æ‹© -->
                <Border Background="#20FFFFFF"
                        BorderBrush="{StaticResource TextSecondary}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="12"
                        Margin="0,16,0,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ“ å½“å‰é¡¹ç›®"
                                   FontSize="12"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        
                        <ComboBox x:Name="ProjectComboBox"
                                  SelectionChanged="ProjectComboBox_SelectionChanged"
                                  DisplayMemberPath="Name"
                                  SelectedValuePath="Id"/>
                        
                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,8,0,0">
                            <ui:Button Content="âž• æ–°å»º"
                                       Width="80"
                                       Margin="0,0,4,0"
                                       Appearance="Secondary"
                                       Click="AddProject_Click"/>
                            
                            <ui:Button Content="âœï¸ ç¼–è¾‘"
                                       Width="80"
                                       Margin="4,0,4,0"
                                       Appearance="Secondary"
                                       Click="EditProject_Click"/>
                            
                            <ui:Button Content="ðŸ—‘ï¸ åˆ é™¤"
                                       Width="80"
                                       Margin="4,0,0,0"
                                       Appearance="Danger"
                                       Click="DeleteProject_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- æŽ§åˆ¶æŒ‰é’® -->
                <ui:Button x:Name="StartButton"
                           Content="å¼€å§‹å·¥ä½œ"
                           Margin="0,16,0,0"
                           HorizontalAlignment="Center"
                           Appearance="Primary"
                           Click="StartButton_Click"/>
                
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Margin="0,8,0,0">
                    <ui:Button x:Name="PauseButton"
                               Content="æš‚åœ"
                               Width="100"
                               Margin="0,0,8,0"
                               Appearance="Secondary"
                               IsEnabled="False"
                               Click="PauseButton_Click"/>
                    
                    <ui:Button x:Name="StopButton"
                               Content="åœæ­¢"
                               Width="100"
                               Appearance="Danger"
                               IsEnabled="False"
                               Click="StopButton_Click"/>
                </StackPanel>
                
                <!-- æŒ‚ä»¶æŽ§åˆ¶ -->
                <Separator Margin="0,16,0,16"/>
                
                <ui:Button Content="âš™ï¸ å·¥ä½œæ—¶é—´è®¾ç½®"
                           Margin="0,0,0,8"
                           HorizontalAlignment="Center"
                           Appearance="Secondary"
                           Click="WorkTimeSettings_Click"/>
                
                <ui:Button Content="åˆ›å»ºæŒ‚ä»¶çª—å£"
                           Margin="0,0,0,0"
                           HorizontalAlignment="Center"
                           Click="CreateWidgetWindow_Click"/>
                
                <ui:Button x:Name="CloseWidgetButton"
                           Content="å…³é—­æŒ‚ä»¶çª—å£"
                           Margin="0,8,0,0"
                           HorizontalAlignment="Center"
                           Appearance="Secondary"
                           IsEnabled="False"
                           Click="CloseWidgetWindow_Click"/>
                
                <!-- ç»Ÿè®¡æ‘˜è¦ï¼ˆå¯æŠ˜å ï¼‰ -->
                <Separator Margin="0,16,0,16"/>
                
                <Expander x:Name="StatisticsExpander"
                          Header="ðŸ“Š ä»Šæ—¥ç»Ÿè®¡"
                          IsExpanded="False"
                          Background="#20FFFFFF"
                          BorderBrush="{StaticResource TextSecondary}"
                          BorderThickness="1"
                          Padding="12">
                    <Expander.HeaderTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0"
                                           Text="ðŸ“Š ä»Šæ—¥ç»Ÿè®¡"
                                           FontSize="14"
                                           FontWeight="Bold"
                                           Foreground="{StaticResource TextPrimary}"/>
                                
                                <StackPanel Grid.Column="1"
                                            Orientation="Horizontal">
                                    <TextBlock x:Name="QuickStatsText"
                                               FontSize="11"
                                               Foreground="{StaticResource TextSecondary}">
                                        <Run Text="â±ï¸"/>
                                        <Run x:Name="QuickHoursRun" Text="0.0h"/>
                                        <Run Text="  ðŸ“"/>
                                        <Run x:Name="QuickSessionsRun" Text="0"/>
                                    </TextBlock>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </Expander.HeaderTemplate>
                    
                    <StackPanel Margin="0,12,0,0">
                        <!-- ç»Ÿè®¡å¡ç‰‡ -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- æ€»å·¥æ—¶ -->
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="â±ï¸"
                                           FontSize="16"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="StatsTotalHours"
                                           Text="0.0h"
                                           FontSize="18"
                                           FontWeight="Bold"
                                           Foreground="{StaticResource AccentGold}"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                                <TextBlock Text="æ€»å·¥æ—¶"
                                           FontSize="10"
                                           Foreground="{StaticResource TextSecondary}"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                            
                            <!-- ä¼šè¯æ•° -->
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="ðŸ“"
                                           FontSize="16"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="StatsSessionCount"
                                           Text="0"
                                           FontSize="18"
                                           FontWeight="Bold"
                                           Foreground="{StaticResource TextPrimary}"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                                <TextBlock Text="ä¼šè¯æ•°"
                                           FontSize="10"
                                           Foreground="{StaticResource TextSecondary}"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                            
                            <!-- å¹³å‡æ—¶é•¿ -->
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="ðŸ“ˆ"
                                           FontSize="16"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="StatsAvgTime"
                                           Text="0.0h"
                                           FontSize="18"
                                           FontWeight="Bold"
                                           Foreground="{StaticResource TextPrimary}"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                                <TextBlock Text="å¹³å‡æ—¶é•¿"
                                           FontSize="10"
                                           Foreground="{StaticResource TextSecondary}"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- æŒ‰é¡¹ç›®ç»Ÿè®¡ -->
                        <Border Background="#10FFFFFF"
                                BorderBrush="{StaticResource TextSecondary}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="8"
                                Margin="0,12,0,0">
                            <StackPanel>
                                <TextBlock Text="ðŸ“ æŒ‰é¡¹ç›®ç»Ÿè®¡"
                                           FontSize="11"
                                           FontWeight="Bold"
                                           Foreground="{StaticResource TextPrimary}"
                                           Margin="0,0,0,8"/>
                                
                                <ItemsControl x:Name="StatsProjectList">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Margin="0,0,0,6">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding ProjectName}"
                                                               FontSize="10"
                                                               Foreground="{StaticResource TextPrimary}"/>
                                                    <!-- ç®€å•æ¡å½¢å›¾ -->
                                                    <Border Background="{StaticResource AccentGold}"
                                                            Height="4"
                                                            CornerRadius="2"
                                                            HorizontalAlignment="Left"
                                                            Width="{Binding BarWidth}"
                                                            Margin="0,2,0,0"/>
                                                </StackPanel>
                                                
                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding FormattedTotal, Mode=OneWay}"
                                                           FontSize="10"
                                                           Foreground="{StaticResource TextSecondary}"
                                                           VerticalAlignment="Center"
                                                           Margin="8,0,0,0"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                
                                <TextBlock x:Name="StatsNoData"
                                           Text="æš‚æ— æ•°æ®"
                                           FontSize="10"
                                           Foreground="{StaticResource TextSecondary}"
                                           HorizontalAlignment="Center"
                                           Margin="0,8,0,0"
                                           Visibility="Collapsed"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- æ“ä½œæŒ‰é’® -->
                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,12,0,0">
                            <ui:Button Content="è¯¦ç»†ç»Ÿè®¡"
                                       Width="100"
                                       Margin="0,0,4,0"
                                       Appearance="Secondary"
                                       Click="ShowStatistics_Click"/>
                            <ui:Button Content="å¯¼å‡ºæ•°æ®"
                                       Width="100"
                                       Margin="4,0,0,0"
                                       Appearance="Secondary"
                                       Click="ExportStatistics_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>
                
                <!-- æ‰˜ç›˜æŽ§åˆ¶ -->
                <Separator Margin="0,16,0,16"/>
                
                <ui:Button Content="æœ€å°åŒ–åˆ°æ‰˜ç›˜"
                           Margin="0,0,0,0"
                           HorizontalAlignment="Center"
                           Appearance="Secondary"
                           Click="MinimizeToTray_Click"/>
                
                <!-- å¿«æ·é”®è¯´æ˜Ž -->
                <Separator Margin="0,16,0,16"/>
                
                <Border Background="#20FFFFFF"
                        BorderBrush="{StaticResource TextSecondary}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="12">
                    <StackPanel>
                        <TextBlock Text="âŒ¨ï¸ å…¨å±€å¿«æ·é”®"
                                   FontSize="12"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource TextPrimary}"
                                   Margin="0,0,0,8"/>
                        
                        <TextBlock FontSize="10"
                                   Foreground="{StaticResource TextSecondary}"
                                   TextWrapping="Wrap">
                            <Run Text="Ctrl+Alt+S"/>
                            <Run Text=" - å¼€å§‹/æš‚åœå·¥ä½œ" Foreground="{StaticResource TextPrimary}"/>
                            <LineBreak/>
                            <Run Text="Ctrl+Alt+E"/>
                            <Run Text=" - åœæ­¢å·¥ä½œ" Foreground="{StaticResource TextPrimary}"/>
                            <LineBreak/>
                            <Run Text="Ctrl+Alt+H"/>
                            <Run Text=" - æ˜¾ç¤º/éšè—ä¸»çª—å£" Foreground="{StaticResource TextPrimary}"/>
                            <LineBreak/>
                            <Run Text="Ctrl+Alt+W"/>
                            <Run Text=" - æ˜¾ç¤º/éšè—æŒ‚ä»¶" Foreground="{StaticResource TextPrimary}"/>
                        </TextBlock>
                        
                        <ui:Button Content="æŸ¥çœ‹è¯¦ç»†è¯´æ˜Ž"
                                   Margin="0,8,0,0"
                                   HorizontalAlignment="Center"
                                   Appearance="Secondary"
                                   Click="ShowHotkeySettings_Click"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</ui:FluentWindow>
